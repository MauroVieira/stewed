"use strict";function Modal(t){var i=this;this.modal=document.getElementById(t),this.isOpen=!1;if(this.backgroundColor="#000",null!==this.modal){for(var n=this.modal.getElementsByClassName("modal-close"),o=0;o<n.length;o++){var a=n[o];a.addEventListener("click",function(){i.hide()})}this.modal.addEventListener("transitionend",function(){this.classList.contains("modal--animatable")&&this.classList.remove("modal--animatable")}),document.addEventListener("keyup",function(t){27===t.keyCode&&i.isOpen&&i.hide()})}this.show=function(){null!==this.modal&&(this.modal.classList.add("modal--visible"),this.isOpen=!0)},this.hide=function(){null!==this.modal&&(this.modal.classList.remove("modal--visible"),this.modal.classList.add("modal--animatable"),this.isOpen=!1)}}$(function(){$(document).on("change",".file-path",function(){var t=$(".file-path > input[type=text]"),i=$(".upload").val();t.val(i),t.addClass("valid")})}),$(function(){$.fn.extend({showTab:function(t){$(".tabs").find(".active").removeClass("active"),$(".tabs").find("a[href$="+t+"]").addClass("active"),$("body").find(".tab-section").css({visibility:"hidden",display:"none"}),$(t).css({visibility:"visible",display:"block"})}}),$.fn.extend({tabs:function(){var t=$(".tabs li .active").attr("href")||"#"+$(this).data("target");$tab=$(t),$tab.css({visibility:"visible",display:"block"}),$(document).on("keyup",function(t,i){if(t.preventDefault(),37===t.keyCode||38===t.keyCode){var n=$tab.prev().attr("id");"undefined"!=typeof n&&($tab.showTab("#"+n),$tab=$("#"+n))}if(39===t.keyCode||40===t.keyCode){var o=$tab.next().attr("id");"undefined"!=typeof o&&($tab.showTab("#"+o),$tab=$("#"+o))}}),$(this).click(function(t){t.preventDefault();var i=$(this).attr("href")||"#"+$(this).data("target");$tab=$(i),$tab.showTab(i)})}}),$.fn.extend({openModal:function(t){$("body").css("overflow","hidden");var i=this.selector;$overlay=$(".modal-overlay"),$modal=$(i);var n={backgroundColor:"#000",opacityOverlay:.6,transitionStyle:!0,keyboard:!0,durationIn:.477,durationOut:.177};t=$.extend(n,t),$("body").find(".modal-overlay").css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s",background:t.backgroundColor,opacity:t.opacityOverlay}),t.transitionStyle?$modal.css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s",visibility:"visible",transform:"scale(1)",opacity:"1",top:"10%"}):$modal.css({visibility:"visible",transform:"scale(1)",opacity:"1",top:"10%"}),$modal.find(".modal-close").on("click",function(i){i.preventDefault(),$modal.closeModal(t)}),t.keyboard&&$(document).on("keyup",function(i){27===i.keyCode&&$modal.closeModal(t)})}}),$.fn.extend({closeModal:function(t){$overlay.removeClass("state-show"),$(".modal-overlay").remove(),$("body").css("overflow","auto"),t.transitionStyle?$modal.css({WebkitTransition:"all "+t.durationOut+"s",MozTransition:"all "+t.durationOut+"s",MsTransition:"all "+t.durationOut+"s",OTransition:"all "+t.durationOut+"s",transition:"all "+t.durationOut+"s",visibility:"hidden",transform:"scale(0.7)",opacity:"0",top:"30%"}):$modal.css({visibility:"hidden",opacity:"0",top:"30%"})}}),$.fn.extend({callModal:function(t){return this.each(function(){$(this).click(function(i){$overlayAppend=$('<div class="modal-overlay"></div>'),$("body").append($overlayAppend);var n=$(this).attr("href")||"#"+$(this).data("target");$(n).openModal(t),$(".modal-overlay").click(function(i){$(n).closeModal(t)})})})}}),$.fn.extend({openDropdown:function(t){var i=this.selector;$overlay=$(".modal-overlay"),$drop=$(i);var n={keyboard:!0,alignment:"left",durationIn:.4,durationOut:.3};t=$.extend(n,t),$drop.css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s","text-align":t.alignment,visibility:"visible",opacity:"1",zIndex:"1",top:"0"}),$drop.find(".modal-close").on("click",function(i){i.preventDefault(),$drop.closeModal(t)}),t.keyboard&&$(document).on("keyup",function(i){27===i.keyCode&&$drop.closeDropDown(t)})}}),$.fn.extend({closeDropDown:function(t){$drop.css({WebkitTransition:"all "+t.durationOut+"s",MozTransition:"all "+t.durationOut+"s",MsTransition:"all "+t.durationOut+"s",OTransition:"all "+t.durationOut+"s",transition:"all "+t.durationOut+"s",visibility:"hidden",opacity:"0",zIndex:"-1",top:"40px"})}}),$.fn.extend({dropdown:function(t){return this.each(function(){$(this).click(function(i){var n=$(this).attr("href")||"#"+$(this).data("target");$(n).hasClass("dropdown_open")?($(n).closeDropDown(t),$(n).removeClass("dropdown_open")):($(n).addClass("dropdown_open"),$(n).openDropdown(t))})})}})}),console.log("Modal (v0.1.2)"),!function(){for(var t=[],i=document.querySelectorAll("[stewed-modal]"),n=0;n<i.length;n++){var o=i[n],a=o.getAttribute("stewed-modal");t[a]=new Modal(a),o.addEventListener("click",function(){var i=this.getAttribute("stewed-modal"),n=t[i];n.isOpen?n.hide():n.show()})}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0ZXdlZC5qcyIsIm1vZGFsL21vZGFsLmpzIl0sIm5hbWVzIjpbIk1vZGFsIiwibW9kYWxJRCIsIl9zZWxmIiwidGhpcyIsIm1vZGFsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlzT3BlbiIsImJhY2tncm91bmRDb2xvciIsImNsb3NlQnV0dG9ucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJpIiwibGVuZ3RoIiwiYnRuX2Nsb3NlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsImUiLCJrZXlDb2RlIiwic2hvdyIsImFkZCIsIiQiLCJvbiIsImlucHV0X2ZpbGUiLCJ1cGxvYWRfZmlsZSIsInZhbCIsImFkZENsYXNzIiwiZm4iLCJleHRlbmQiLCJzaG93VGFiIiwidGFiSUQiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJjc3MiLCJ2aXNpYmlsaXR5IiwiZGlzcGxheSIsInRhYnMiLCJhdHRyIiwiZGF0YSIsIiR0YWIiLCJwcmV2ZW50RGVmYXVsdCIsIlBSRVYiLCJwcmV2IiwiTkVYVCIsIm5leHQiLCJjbGljayIsIm9wZW5Nb2RhbCIsIm9wdGlvbnMiLCJzZWxlY3RvciIsIiRvdmVybGF5IiwiJG1vZGFsIiwiZGVmYXVsdHMiLCJvcGFjaXR5T3ZlcmxheSIsInRyYW5zaXRpb25TdHlsZSIsImtleWJvYXJkIiwiZHVyYXRpb25JbiIsImR1cmF0aW9uT3V0IiwiV2Via2l0VHJhbnNpdGlvbiIsIk1velRyYW5zaXRpb24iLCJNc1RyYW5zaXRpb24iLCJPVHJhbnNpdGlvbiIsInRyYW5zaXRpb24iLCJiYWNrZ3JvdW5kIiwib3BhY2l0eSIsInRyYW5zZm9ybSIsInRvcCIsImV2ZW50IiwiY2xvc2VNb2RhbCIsImNhbGxNb2RhbCIsImVhY2giLCIkb3ZlcmxheUFwcGVuZCIsImFwcGVuZCIsIm9wZW5Ecm9wZG93biIsImRyb3Bkb3duSUQiLCIkZHJvcCIsImFsaWdubWVudCIsInRleHQtYWxpZ24iLCJ6SW5kZXgiLCJjbG9zZURyb3BEb3duIiwiZHJvcGRvd24iLCJoYXNDbGFzcyIsImNvbnNvbGUiLCJsb2ciLCJtZW1vcnlfbW9kYWxzIiwiZWxlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxlbSIsImdldEF0dHJpYnV0ZSIsImN1cnJlbnRfbW9kYWwiXSwibWFwcGluZ3MiOiJBQUFBLFlDSUEsU0FBQUEsT0FBQUMsR0FDQSxHQUFBQyxHQUFBQyxJQUNBQSxNQUFBQyxNQUFBQyxTQUFBQyxlQUFBTCxHQUNBRSxLQUFBSSxRQUFBLENBT0EsSUFIQUosS0FBQUssZ0JBQUEsT0FHQSxPQUFBTCxLQUFBQyxNQUFBLENBR0EsSUFBQSxHQURBSyxHQUFBTixLQUFBQyxNQUFBTSx1QkFBQSxlQUNBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUFHLE9BQUFELElBQUEsQ0FDQSxHQUFBRSxHQUFBSixFQUFBRSxFQUNBRSxHQUFBQyxpQkFBQSxRQUFBLFdBQ0FaLEVBQUFhLFNBR0FaLEtBQUFDLE1BQUFVLGlCQUFBLGdCQUFBLFdBQ0FYLEtBQUFhLFVBQUFDLFNBQUEsc0JBQ0FkLEtBQUFhLFVBQUFFLE9BQUEsdUJBSUFiLFNBQUFTLGlCQUFBLFFBQUEsU0FBQUssR0FDQSxLQUFBQSxFQUFBQyxTQUFBbEIsRUFBQUssUUFDQUwsRUFBQWEsU0FTQVosS0FBQWtCLEtBQUEsV0FDQSxPQUFBbEIsS0FBQUMsUUFDQUQsS0FBQUMsTUFBQVksVUFBQU0sSUFBQSxrQkFDQW5CLEtBQUFJLFFBQUEsSUFHQUosS0FBQVksS0FBQSxXQUNBLE9BQUFaLEtBQUFDLFFBQ0FELEtBQUFDLE1BQUFZLFVBQUFFLE9BQUEsa0JBQ0FmLEtBQUFDLE1BQUFZLFVBQUFNLElBQUEscUJBQ0FuQixLQUFBSSxRQUFBLElEaERBZ0IsRUFBQSxXQUdBQSxFQUFBbEIsVUFBQW1CLEdBQUEsU0FBQSxhQUFBLFdBQ0EsR0FBQUMsR0FBQUYsRUFBQSxpQ0FDQUcsRUFBQUgsRUFBQSxXQUFBSSxLQUNBRixHQUFBRSxJQUFBRCxHQUNBRCxFQUFB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QUFBQSxFQUFBMkUsRUFBQTFFLE9BQUFELElBQUEsQ0FDQSxHQUFBNkUsR0FBQUYsRUFBQTNFLEdBQ0FWLEVBQUF1RixFQUFBQyxhQUFBLGVBQ0FKLEdBQUFwRixHQUFBLEdBQUFELE9BQUFDLEdBR0F1RixFQUFBMUUsaUJBQUEsUUFBQSxXQUNBLEdBQUE0RSxHQUFBdkYsS0FBQXNGLGFBQUEsZ0JBRUFyRixFQUFBaUYsRUFBQUssRUFDQXRGLEdBQUFHLE9BQ0FILEVBQUFXLE9BRUFYLEVBQUFpQiIsImZpbGUiOiJzdGV3ZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIlxuXG4kKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qKiBVcGxvYWQgdGhlIGZpbGUgKiovXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcuZmlsZS1wYXRoJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaW5wdXRfZmlsZSA9ICQoJy5maWxlLXBhdGggPiBpbnB1dFt0eXBlPXRleHRdJyk7XG4gICAgICAgIHZhciB1cGxvYWRfZmlsZSA9ICQoJy51cGxvYWQnKS52YWwoKTtcbiAgICAgICAgaW5wdXRfZmlsZS52YWwodXBsb2FkX2ZpbGUpO1xuICAgICAgICBpbnB1dF9maWxlLmFkZENsYXNzKCd2YWxpZCcpXG4gICAgfSk7XG5cbn0pO1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuLmV4dGVuZCh7XG4gICAgICAgIHNob3dUYWI6IGZ1bmN0aW9uKHRhYklEKSB7XG5cbiAgICAgICAgICAgICQoICcudGFicycgKS5maW5kKCAnLmFjdGl2ZScgKS5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcbiAgICAgICAgICAgICQoICcudGFicycgKS5maW5kKCAnYVtocmVmJD0nICsgdGFiSUQgKyAnXScgKS5hZGRDbGFzcyggJ2FjdGl2ZScgKTtcblxuICAgICAgICAgICAgJCggJ2JvZHknICkuZmluZCggJy50YWItc2VjdGlvbicgKS5jc3Moe1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgICAgIDogJ2hpZGRlbicsIFxuICAgICAgICAgICAgICAgIGRpc3BsYXkgICAgICAgIDogJ25vbmUnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCggdGFiSUQgKS5jc3Moe1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgICAgIDogJ3Zpc2libGUnLCBcbiAgICAgICAgICAgICAgICBkaXNwbGF5ICAgICAgICA6ICdibG9jaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgdGFiczogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHZhciB0YWJJRCA9ICQoXCIudGFicyBsaSAuYWN0aXZlXCIpLmF0dHIoXCJocmVmXCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAgICAgICAkdGFiID0gJCh0YWJJRCk7XG4gICAgICAgICAgICAkdGFiLmNzcyh7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgOiAndmlzaWJsZScsIFxuICAgICAgICAgICAgICAgIGRpc3BsYXkgICAgICAgIDogJ2Jsb2NrJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUsIHRhYklEKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM3IHx8IGUua2V5Q29kZSA9PT0gMzgpIHsgXG4gICAgICAgICAgICAgICAgICAgIHZhciBQUkVWID0gJHRhYi5wcmV2KCkuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIFBSRVYgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0YWIuc2hvd1RhYignIycgKyBQUkVWKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0YWIgPSAkKCcjJyArIFBSRVYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM5IHx8IGUua2V5Q29kZSA9PT0gNDApIHsgXG4gICAgICAgICAgICAgICAgICAgIHZhciBORVhUID0gJHRhYi5uZXh0KCkuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIE5FWFQgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0YWIuc2hvd1RhYignIycgKyBORVhUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0YWIgPSAkKCcjJyArIE5FWFQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFiSUQgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAgICAgICAgICAgJHRhYiA9ICQodGFiSUQpO1xuICAgICAgICAgICAgICAgICR0YWIuc2hvd1RhYih0YWJJRCk7XG5cbiAgICAgICAgICAgIH0pOyBcbiAgICAgICAgfVxuICAgIH0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgb3Blbk1vZGFsOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cbiAgICAgICAgJChcImJvZHlcIikuY3NzKCBcIm92ZXJmbG93XCIsIFwiaGlkZGVuXCIgKTtcbiAgICAgICAgdmFyIG1vZGFsSUQgPSB0aGlzLnNlbGVjdG9yO1xuXG4gICAgICAgICRvdmVybGF5ID0gJCgnLm1vZGFsLW92ZXJsYXknKTtcbiAgICAgICAgJG1vZGFsID0gJChtb2RhbElEKTtcblxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgOiAnIzAwMCcsXG4gICAgICAgICAgICBvcGFjaXR5T3ZlcmxheSAgOiAwLjYsIFxuICAgICAgICAgICAgdHJhbnNpdGlvblN0eWxlIDogdHJ1ZSxcbiAgICAgICAgICAgIGtleWJvYXJkICAgICAgICA6IHRydWUsXG4gICAgICAgICAgICBkdXJhdGlvbkluICAgICAgOiAwLjQ3NyxcbiAgICAgICAgICAgIGR1cmF0aW9uT3V0ICAgICA6IDAuMTc3XG4gICAgICAgIH07XG5cbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTsgIFxuXG4gICAgICAgICQoXCJib2R5XCIpLmZpbmQoJy5tb2RhbC1vdmVybGF5JykuY3NzKHsgXG4gICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgIE1zVHJhbnNpdGlvbiAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICBPVHJhbnNpdGlvbiAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgIGJhY2tncm91bmQgICAgICAgICAgOiBvcHRpb25zLmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgIG9wYWNpdHkgICAgICAgICAgICAgOiBvcHRpb25zLm9wYWNpdHlPdmVybGF5IFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAob3B0aW9ucy50cmFuc2l0aW9uU3R5bGUpIHtcbiAgICAgICAgICAgICRtb2RhbC5jc3Moe1xuICAgICAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgICAgICBNc1RyYW5zaXRpb24gICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5ICAgICAgICAgIDogJ3Zpc2libGUnLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybSAgICAgICAgICAgOiAnc2NhbGUoMSknLFxuICAgICAgICAgICAgICAgIG9wYWNpdHkgICAgICAgICAgICAgOiAnMScsXG4gICAgICAgICAgICAgICAgdG9wICAgICAgICAgICAgICAgICA6ICcxMCUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRtb2RhbC5jc3Moe1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgICAgICAgICAgOiAndmlzaWJsZScsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtICAgICAgICAgICA6ICdzY2FsZSgxKScsXG4gICAgICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6ICcxJyxcbiAgICAgICAgICAgICAgICB0b3AgICAgICAgICAgICAgICAgIDogJzEwJSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJG1vZGFsLmZpbmQoXCIubW9kYWwtY2xvc2VcIikub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkbW9kYWwuY2xvc2VNb2RhbChvcHRpb25zKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMua2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgeyBcbiAgICAgICAgICAgICAgICAgICAgJG1vZGFsLmNsb3NlTW9kYWwob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuJC5mbi5leHRlbmQoe1xuICAgIGNsb3NlTW9kYWw6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgICAgICAkb3ZlcmxheS5yZW1vdmVDbGFzcygnc3RhdGUtc2hvdycpO1xuICAgICAgICAkKFwiLm1vZGFsLW92ZXJsYXlcIikucmVtb3ZlKCk7XG5cbiAgICAgICAgJChcImJvZHlcIikuY3NzKCBcIm92ZXJmbG93XCIsIFwiYXV0b1wiICk7XG4gICAgICAgIGlmIChvcHRpb25zLnRyYW5zaXRpb25TdHlsZSkge1xuICAgICAgICAgICAgJG1vZGFsLmNzcygge1xuICAgICAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgICAgIE1velRyYW5zaXRpb24gICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgICAgIE1zVHJhbnNpdGlvbiAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24gICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgICAgICAgICAgOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gICAgICAgICAgIDogJ3NjYWxlKDAuNyknLFxuICAgICAgICAgICAgICAgIG9wYWNpdHkgICAgICAgICAgICAgOiAnMCcsXG4gICAgICAgICAgICAgICAgdG9wICAgICAgICAgICAgICAgICA6ICczMCUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRtb2RhbC5jc3MoIHtcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5ICAgICAgICAgIDogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6ICcwJyxcbiAgICAgICAgICAgICAgICB0b3AgICAgICAgICAgICAgICAgIDogJzMwJSdcbiAgICAgICAgICAgIH0pOyBcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgY2FsbE1vZGFsOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICRvdmVybGF5QXBwZW5kID0gJCgnPGRpdiBjbGFzcz1cIm1vZGFsLW92ZXJsYXlcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hcHBlbmQoJG92ZXJsYXlBcHBlbmQpO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1vZGFsSUQgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAgICAgICAgICAgJChtb2RhbElEKS5vcGVuTW9kYWwob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAkKCcubW9kYWwtb3ZlcmxheScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgJChtb2RhbElEKS5jbG9zZU1vZGFsKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyBcbiAgICB9XG59KTtcblxuJC5mbi5leHRlbmQoe1xuICAgIG9wZW5Ecm9wZG93bjogZnVuY3Rpb24ob3B0aW9ucykge1xuXG4gICAgICAgIHZhciBkcm9wZG93bklEID0gdGhpcy5zZWxlY3RvcjtcbiAgICAgICAgJG92ZXJsYXkgPSAkKCcubW9kYWwtb3ZlcmxheScpO1xuICAgICAgICAkZHJvcCA9ICQoZHJvcGRvd25JRCk7XG5cbiAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAga2V5Ym9hcmQgICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIGFsaWdubWVudCAgICAgICA6ICdsZWZ0JyxcbiAgICAgICAgICAgIGR1cmF0aW9uSW4gICAgICA6IDAuNDAwLFxuICAgICAgICAgICAgZHVyYXRpb25PdXQgICAgIDogMC4zMDBcbiAgICAgICAgfTtcblxuICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpOyAgXG4gICAgICAgICRkcm9wLmNzcyh7XG4gICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgIE1zVHJhbnNpdGlvbiAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICBPVHJhbnNpdGlvbiAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgICd0ZXh0LWFsaWduJyAgICAgICAgOiBvcHRpb25zLmFsaWdubWVudCxcbiAgICAgICAgICAgIHZpc2liaWxpdHkgICAgICAgICAgOiAndmlzaWJsZScsXG4gICAgICAgICAgICBvcGFjaXR5ICAgICAgICAgICAgIDogJzEnLFxuICAgICAgICAgICAgekluZGV4ICAgICAgICAgICAgICA6ICcxJyxcbiAgICAgICAgICAgIHRvcCAgICAgICAgICAgICAgICAgOiAnMCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGRyb3AuZmluZChcIi5tb2RhbC1jbG9zZVwiKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICRkcm9wLmNsb3NlTW9kYWwob3B0aW9ucyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmtleWJvYXJkKSB7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsgXG4gICAgICAgICAgICAgICAgICAgICRkcm9wLmNsb3NlRHJvcERvd24ob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuJC5mbi5leHRlbmQoe1xuICAgIGNsb3NlRHJvcERvd246IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgJGRyb3AuY3NzKCB7XG4gICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbk91dCArICdzJyxcbiAgICAgICAgICAgIE1velRyYW5zaXRpb24gICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgTXNUcmFuc2l0aW9uICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICBPVHJhbnNpdGlvbiAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbk91dCArICdzJyxcbiAgICAgICAgICAgIHRyYW5zaXRpb24gICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgICAgICA6ICdoaWRkZW4nLFxuICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6ICcwJyxcbiAgICAgICAgICAgIHpJbmRleCAgICAgICAgICAgICAgOiAnLTEnLFxuICAgICAgICAgICAgdG9wICAgICAgICAgICAgICAgICA6ICc0MHB4J1xuICAgICAgICB9KTtcblxuICAgIH1cbn0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgZHJvcGRvd246IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHZhciBkcm9wZG93bklEID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKSB8fCAnIycgKyAkKHRoaXMpLmRhdGEoJ3RhcmdldCcpO1xuICAgICAgICAgICAgICAgIGlmKCQoZHJvcGRvd25JRCkuaGFzQ2xhc3MoJ2Ryb3Bkb3duX29wZW4nKSkge1xuICAgICAgICAgICAgICAgICAgICAkKGRyb3Bkb3duSUQpLmNsb3NlRHJvcERvd24ob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICQoZHJvcGRvd25JRCkucmVtb3ZlQ2xhc3MoJ2Ryb3Bkb3duX29wZW4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKGRyb3Bkb3duSUQpLmFkZENsYXNzKCdkcm9wZG93bl9vcGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICQoZHJvcGRvd25JRCkub3BlbkRyb3Bkb3duKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgXG4gICAgfVxufSk7XG59KTtcblxuIiwiLy9ERUJVR1xuY29uc29sZS5sb2coJ01vZGFsICh2MC4xLjIpJyk7XG5cbi8vTW9kYWxcbmZ1bmN0aW9uIE1vZGFsKG1vZGFsSUQpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHRoaXMubW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElEKTtcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgIHZhciBudW0gPSAxO1xuXG4gICAgLy9Qcm9wZXJ0aWVzXG4gICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSAnIzAwMCc7XG4gICAgXG4gICAgLy9Db25zdHJ1Y3RvclxuICAgIGlmKHRoaXMubW9kYWwgIT09IG51bGwpe1xuICAgICAgICAvL2NvbnN0cnVjdCBPYmplY3RcbiAgICAgICAgdmFyIGNsb3NlQnV0dG9ucyA9IHRoaXMubW9kYWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtY2xvc2UnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9zZUJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBidG5fY2xvc2UgPSBjbG9zZUJ1dHRvbnNbaV07XG4gICAgICAgICAgICBidG5fY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9zZWxmLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZih0aGlzLmNsYXNzTGlzdC5jb250YWlucygnbW9kYWwtLWFuaW1hdGFibGUnKSl7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tYW5pbWF0YWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9hZGQga2V5IGNsb3NlIGV2ZW50XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYoZS5rZXlDb2RlID09PSAyNyAmJiBfc2VsZi5pc09wZW4pe1xuICAgICAgICAgICAgICAgIF9zZWxmLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBDdXJyZW50IE1vZGFsXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXG4gICAgICovXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZih0aGlzLm1vZGFsICE9PSBudWxsKXtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy5tb2RhbCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1hbmltYXRhYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxufTtcblxuLy9TSE9XIE1PREFMXG4hIGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgbWVtb3J5X21vZGFscyA9IFtdO1xuICAgIFxuICAgIHZhciBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tzdGV3ZWQtbW9kYWxdJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZWxlbSA9IGVsZW1zW2ldO1xuICAgICAgICB2YXIgbW9kYWxJRCA9IGVsZW0uZ2V0QXR0cmlidXRlKCdzdGV3ZWQtbW9kYWwnKTtcbiAgICAgICAgbWVtb3J5X21vZGFsc1ttb2RhbElEXSA9IG5ldyBNb2RhbChtb2RhbElEKTtcbiAgICAgICAgXG4gICAgICAgIC8vZWxlbWVudCBjbGlja1xuICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBjdXJyZW50X21vZGFsID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3N0ZXdlZC1tb2RhbCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgbW9kYWwgPSBtZW1vcnlfbW9kYWxzW2N1cnJlbnRfbW9kYWxdO1xuICAgICAgICAgICAgaWYobW9kYWwuaXNPcGVuKXtcbiAgICAgICAgICAgICAgICBtb2RhbC5oaWRlKCk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBtb2RhbC5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0oKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
