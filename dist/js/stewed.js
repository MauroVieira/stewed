var Dropdown=function(t,e){"use strict";this.dropdown=t,this.id=document.getElementById(e),this.show=function(){if(this.id.classList.contains("dropdown--visible"))this.id.className+=" dropdown--animatable",this.id.classList.remove("dropdown--visible");else{var t=document.getElementsByClassName("dropdown--visible");t.length>0&&t[0].classList.remove("dropdown--visible"),this.id.className+=" dropdown--visible"}},this.id.addEventListener("transitionend",function(){this.classList.contains("dropdown--animatable")&&this.classList.remove("dropdown--animatable")})};!function(){"use strict";for(var t=document.querySelectorAll("[stewed-dropdown]"),e=0;e<t.length;e++){var i=t[e];i.addEventListener("click",function(){var t=this.getAttribute("stewed-dropdown"),e=new Dropdown(this,t);this.classList.contains("disabled")||e.show()})}}();var Form=function(){"use strict";const t=document.querySelectorAll('[stewed-validate="true"]');for(var e=document.getElementsByClassName("textfield__input"),i=0;i<e.length;i++)if(!e[i].disabled){var s=e[i];s.parentNode.className="textfield",s.addEventListener("input",function(){if(t.length){const e=""==this.min?"tel"==this.type?9:2:this.min,i=""==this.max?"tel"==this.type?13:Number.MAX_SAFE_INTEGER:this.max,s=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;"select-one"==this.type?""!=this.value?this.parentNode.className="textfield textfield--valid":this.parentNode.className="textfield textfield--invalid":"textarea"==this.type?this.value.length>1?this.parentNode.className="textfield textfield--valid":0==this.value.length?this.parentNode.className="textfield":this.parentNode.className="textfield textfield--invalid":this.value.length>=e&&this.value.length<=i?"email"==this.type?s.test(this.value)?this.parentNode.className="textfield textfield--valid":this.parentNode.className="textfield textfield--invalid":this.parentNode.className="textfield textfield--valid":0==this.value.length?this.parentNode.className="textfield":this.parentNode.className="textfield textfield--invalid"}else this.value.length>1?this.parentNode.className="textfield textfield--filled":this.parentNode.className="textfield"})}};!function(){"use strict";new Form}();var Modal=function(t){"use strict";var e=this;if(this.modal=document.getElementById(t),this.isOpen=!1,null!==this.modal){for(var i=this.modal.getElementsByClassName("modal-close"),s=0;s<i.length;s++){var n=i[s];n.addEventListener("click",function(){e.hide()})}this.modal.addEventListener("transitionend",function(){this.classList.contains("modal--animatable")&&this.classList.remove("modal--animatable")}),document.addEventListener("keyup",function(t){27===t.keyCode&&e.isOpen&&e.hide()})}this.show=function(){null!==this.modal&&(this.modal.classList.add("modal--visible"),this.isOpen=!0)},this.hide=function(){null!==this.modal&&(this.modal.classList.remove("modal--visible"),this.modal.classList.add("modal--animatable"),this.isOpen=!1)}};!function(){"use strict";for(var t=[],e=document.querySelectorAll("[stewed-modal]"),i=0;i<e.length;i++){var s=e[i],n=s.getAttribute("stewed-modal");t[n]=new Modal(n),s.addEventListener("click",function(){var e=this.getAttribute("stewed-modal"),i=t[e],s=document.querySelector(".modal");s.addEventListener("click",function(){i.hide()}),i.isOpen?i.hide():i.show()})}}();var SideNav=function(){"use strict";var t=document.querySelector(".js-menu-show"),e=document.querySelector(".js-menu-hide"),i=document.querySelector(".js-side-nav"),s=document.querySelector(".js-side-nav-container"),n=!1,a=0,d=0;this.addEventListeners=function(){t&&t.addEventListener("click",this.showSideNav),e&&e.addEventListener("click",l),i&&i.addEventListener("click",l),s&&s.addEventListener("click",this.blockClicks),i&&(i.addEventListener("touchstart",this.onTouchStart),i.addEventListener("touchmove",this.onTouchMove),i.addEventListener("touchend",this.onTouchEnd))},this.blockClicks=function(t){t.stopPropagation()};var o=function(t){i.classList.remove("side-nav--animatable"),i.removeEventListener("transitionend",o)};this.showSideNav=function(){i.classList.add("side-nav--animatable"),i.classList.add("side-nav--visible"),i.addEventListener("transitionend",o)};var l=function(){i.classList.add("side-nav--animatable"),i.classList.remove("side-nav--visible"),i.addEventListener("transitionend",o)},c=function(){if(n){requestAnimationFrame(function(){c()});const t=Math.min(0,d-a);s.style.transform="translateX("+t+"px)"}};this.onTouchStart=function(t){i.classList.contains("side-nav--visible")&&(a=t.touches[0].pageX,d=a,n=!0,requestAnimationFrame(function(){c()}))},this.onTouchMove=function(t){if(n){d=t.touches[0].pageX;const e=Math.min(0,d-a);e<0&&t.preventDefault()}},this.onTouchEnd=function(t){if(n){n=!1;const e=Math.min(0,d-a);s.style.transform="",e<0&&l()}}};!function(){"use strict";var t=new SideNav;t.addEventListeners()}();var snackbar=function(t){"use strict";var e=this;if(this.snackbar=document.getElementById(t),this.isOpen=!1,null!==this.snackbar){for(var i=this.snackbar.getElementsByClassName("snackbar-close"),s=0;s<i.length;s++){var n=i[s];n.addEventListener("click",function(){e.hide()})}this.snackbar.addEventListener("transitionend",function(){this.classList.contains("snackbar--animatable")&&this.classList.remove("snackbar--animatable")}),document.addEventListener("keyup",function(t){27===t.keyCode&&e.isOpen&&e.hide()})}this.show=function(){null!==this.snackbar&&(this.snackbar.classList.add("snackbar--visible"),this.isOpen=!0)},this.hide=function(){null!==this.snackbar&&(this.snackbar.classList.remove("snackbar--visible"),this.snackbar.classList.add("snackbar--animatable"),this.isOpen=!1)}};!function(){"use strict";for(var t=[],e=document.querySelectorAll("[stewed-snackbar]"),i=0;i<e.length;i++){var s=e[i],n=s.getAttribute("stewed-snackbar");t[n]=new snackbar(n),s.addEventListener("click",function(){var e=this.getAttribute("stewed-snackbar"),i=t[e],s=document.querySelector(".snackbar");s.addEventListener("click",function(){i.hide()}),i.isOpen?i.hide():i.show()})}}();var Tabs=function(t,e){"use strict";this.tab=t,this.id=document.getElementById(e),this.hide=function(){for(var t=this.tab.parentNode.children,e=this.id.parentNode.children,i=0;i<t.length;i++)t[i].classList.remove("tabs__item--active");for(var s=0;s<e.length;s++)e[s].classList.remove("tab-section--active")},this.show=function(){this.tab.classList.add("tabs__item--active"),this.id.classList.add("tab-section--active")}};!function(){"use strict";var t=document.getElementsByClassName("tabs__item");Array.from(t);for(var e=0;e<t.length;e++){var i=t[e];i.addEventListener("click",function(){var t=this.getAttribute("stewed-tab-id"),e=new Tabs(this,t);"false"!==t&&(this.classList.contains("disabled")||(e.hide(),e.show()))})}window.addEventListener("keypress",function(e){index<0?index=0:index>=t.length&&(index=t.length-1),console.log(index)})}();var toast=function(){"use strict"};!function(){"use strict";toast()}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3Bkb3duL2Ryb3Bkb3duLmpzIiwiZm9ybS9mb3JtLmpzIiwibW9kYWwvbW9kYWwuanMiLCJzaWRlbmF2L3NpZGVuYXYuanMiLCJzbmFja2Jhci9zbmFja2Jhci5qcyIsInRhYnMvdGFicy5qcyIsInRvYXN0L3RvYXN0LmpzIl0sIm5hbWVzIjpbIkRyb3Bkb3duIiwic2VsZWN0ZWQiLCJpZCIsInRoaXMiLCJkcm9wZG93biIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzaG93IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJjbGFzc05hbWUiLCJyZW1vdmUiLCJlbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZWxlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsIm15RHJvcGRvd24iLCJnZXRBdHRyaWJ1dGUiLCJGb3JtIiwiVkFMSURBVEUiLCJpbnB1dHMiLCJkaXNhYmxlZCIsImlucHV0IiwicGFyZW50Tm9kZSIsIk1JTiIsIm1pbiIsInR5cGUiLCJNQVgiLCJtYXgiLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiRU1BSUwiLCJ2YWx1ZSIsInRlc3QiLCJNb2RhbCIsIm1vZGFsSWQiLCJfc2VsZiIsIm1vZGFsIiwiaXNPcGVuIiwiY2xvc2VCdXR0b25zIiwiYnRuX2Nsb3NlIiwiaGlkZSIsImUiLCJrZXlDb2RlIiwiYWRkIiwibWVtb3J5X21vZGFscyIsImVsZW0iLCJjdXJyZW50X21vZGFsIiwibW9kYWxCb2R5IiwicXVlcnlTZWxlY3RvciIsIlNpZGVOYXYiLCIkc2hvd0J1dHRvbkVsIiwiJGhpZGVCdXR0b25FbCIsIiRzaWRlTmF2RWwiLCIkc2lkZU5hdkNvbnRhaW5lckVsIiwidG91Y2hpbmdTaWRlTmF2Iiwic3RhcnRYIiwiY3VycmVudFgiLCJhZGRFdmVudExpc3RlbmVycyIsInNob3dTaWRlTmF2IiwiaGlkZVNpZGVOYXYiLCJibG9ja0NsaWNrcyIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsImV2dCIsInN0b3BQcm9wYWdhdGlvbiIsIm9uVHJhbnNpdGlvbkVuZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1cGRhdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0cmFuc2xhdGVYIiwiTWF0aCIsInN0eWxlIiwidHJhbnNmb3JtIiwidG91Y2hlcyIsInBhZ2VYIiwicHJldmVudERlZmF1bHQiLCJzaWRlbmF2Iiwic25hY2tiYXIiLCJzbmFja2JhcklkIiwibWVtb3J5X3NuYWNrYmFycyIsImN1cnJlbnRfc25hY2tiYXIiLCJzbmFja2JhckJvZHkiLCJUYWJzIiwidGFiIiwicGFyZW50VGFicyIsImNoaWxkcmVuIiwic2VjdGlvbnNUYWJzIiwiaiIsInRhYnMiLCJBcnJheSIsImZyb20iLCJteVRhYiIsIndpbmRvdyIsImluZGV4IiwiY29uc29sZSIsImxvZyIsInRvYXN0Il0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxVQUFBLFNBQUFDLEVBQUFDLEdBQ0EsWUFFQUMsTUFBQUMsU0FBQUgsRUFDQUUsS0FBQUQsR0FBQUcsU0FBQUMsZUFBQUosR0FHQUMsS0FBQUksS0FBQSxXQUVBLEdBQUFKLEtBQUFELEdBQUFNLFVBQUFDLFNBQUEscUJBU0FOLEtBQUFELEdBQUFRLFdBQUEsd0JBQ0FQLEtBQUFELEdBQUFNLFVBQUFHLE9BQUEseUJBVkEsQ0FDQSxHQUFBQyxHQUFBUCxTQUFBUSx1QkFBQSxvQkFFQUQsR0FBQUUsT0FBQSxHQUNBRixFQUFBLEdBQUFKLFVBQUFHLE9BQUEscUJBRUFSLEtBQUFELEdBQUFRLFdBQUEsdUJBUUFQLEtBQUFELEdBQUFhLGlCQUFBLGdCQUFBLFdBQ0FaLEtBQUFLLFVBQUFDLFNBQUEseUJBQ0FOLEtBQUFLLFVBQUFHLE9BQUEsNEJBT0EsV0FDQSxZQUtBLEtBQUEsR0FGQUssR0FBQVgsU0FBQVksaUJBQUEscUJBRUFDLEVBQUEsRUFBQUEsRUFBQUYsRUFBQUYsT0FBQUksSUFBQSxDQUVBLEdBQUFDLEdBQUFILEVBQUFFLEVBR0FDLEdBQUFKLGlCQUFBLFFBQUEsV0FHQSxHQUFBYixHQUFBQyxLQUFBaUIsYUFBQSxtQkFDQWhCLEVBQUEsR0FBQUosVUFBQUcsS0FBQUQsRUFFQUMsTUFBQUssVUFBQUMsU0FBQSxhQUNBTCxFQUFBRyxZQ2xEQSxJQUFBYyxNQUFBLFdBQ0EsWUFFQSxNQUFBQyxHQUFBakIsU0FBQVksaUJBQUEsMkJBR0EsS0FBQSxHQUZBTSxHQUFBbEIsU0FBQVEsdUJBQUEsb0JBRUFLLEVBQUEsRUFBQUEsRUFBQUssRUFBQVQsT0FBQUksSUFFQSxJQUFBSyxFQUFBTCxHQUFBTSxTQUFBLENBQ0EsR0FBQUMsR0FBQUYsRUFBQUwsRUFDQU8sR0FBQUMsV0FBQWhCLFVBQUEsWUFFQWUsRUFBQVYsaUJBQUEsUUFBQSxXQUdBLEdBQUFPLEVBQUFSLE9BQUEsQ0FDQSxLQUFBYSxHQUFBLElBQUF4QixLQUFBeUIsSUFBQSxPQUFBekIsS0FBQTBCLEtBQUEsRUFBQSxFQUFBMUIsS0FBQXlCLElBQ0FFLEVBQUEsSUFBQTNCLEtBQUE0QixJQUFBLE9BQUE1QixLQUFBMEIsS0FBQSxHQUFBRyxPQUFBQyxpQkFBQTlCLEtBQUE0QixJQUNBRyxFQUFBLG9GQUVBLGVBQUEvQixLQUFBMEIsS0FDQSxJQUFBMUIsS0FBQWdDLE1BQ0FoQyxLQUFBdUIsV0FBQWhCLFVBQUEsNkJBRUFQLEtBQUF1QixXQUFBaEIsVUFBQSwrQkFFQSxZQUFBUCxLQUFBMEIsS0FDQTFCLEtBQUFnQyxNQUFBckIsT0FBQSxFQUNBWCxLQUFBdUIsV0FBQWhCLFVBQUEsNkJBQ0EsR0FBQVAsS0FBQWdDLE1BQUFyQixPQUNBWCxLQUFBdUIsV0FBQWhCLFVBQUEsWUFFQVAsS0FBQXVCLFdBQUFoQixVQUFBLCtCQUdBUCxLQUFBZ0MsTUFBQXJCLFFBQUFhLEdBQUF4QixLQUFBZ0MsTUFBQXJCLFFBQUFnQixFQUNBLFNBQUEzQixLQUFBMEIsS0FDQUssRUFBQUUsS0FBQWpDLEtBQUFnQyxPQUNBaEMsS0FBQXVCLFdBQUFoQixVQUFBLDZCQUVBUCxLQUFBdUIsV0FBQWhCLFVBQUEsK0JBR0FQLEtBQUF1QixXQUFBaEIsVUFBQSw2QkFFQSxHQUFBUCxLQUFBZ0MsTUFBQXJCLE9BQ0FYLEtBQUF1QixXQUFBaEIsVUFBQSxZQUVBUCxLQUFBdUIsV0FBQWhCLFVBQUEsbUNBSUFQLE1BQUFnQyxNQUFBckIsT0FBQSxFQUNBWCxLQUFBdUIsV0FBQWhCLFVBQUEsOEJBRUFQLEtBQUF1QixXQUFBaEIsVUFBQSxpQkFRQSxXQUNBLFlBQ0EsSUFBQVcsUUNqRUEsSUFBQWdCLE9BQUEsU0FBQUMsR0FDQSxZQUVBLElBQUFDLEdBQUFwQyxJQU9BLElBSkFBLEtBQUFxQyxNQUFBbkMsU0FBQUMsZUFBQWdDLEdBQ0FuQyxLQUFBc0MsUUFBQSxFQUdBLE9BQUF0QyxLQUFBcUMsTUFBQSxDQUdBLElBQUEsR0FEQUUsR0FBQXZDLEtBQUFxQyxNQUFBM0IsdUJBQUEsZUFDQUssRUFBQSxFQUFBQSxFQUFBd0IsRUFBQTVCLE9BQUFJLElBQUEsQ0FDQSxHQUFBeUIsR0FBQUQsRUFBQXhCLEVBQ0F5QixHQUFBNUIsaUJBQUEsUUFBQSxXQUNBd0IsRUFBQUssU0FHQXpDLEtBQUFxQyxNQUFBekIsaUJBQUEsZ0JBQUEsV0FDQVosS0FBQUssVUFBQUMsU0FBQSxzQkFDQU4sS0FBQUssVUFBQUcsT0FBQSx1QkFJQU4sU0FBQVUsaUJBQUEsUUFBQSxTQUFBOEIsR0FHQSxLQUFBQSxFQUFBQyxTQUFBUCxFQUFBRSxRQUNBRixFQUFBSyxTQU1BekMsS0FBQUksS0FBQSxXQUNBLE9BQUFKLEtBQUFxQyxRQUNBckMsS0FBQXFDLE1BQUFoQyxVQUFBdUMsSUFBQSxrQkFDQTVDLEtBQUFzQyxRQUFBLElBS0F0QyxLQUFBeUMsS0FBQSxXQUNBLE9BQUF6QyxLQUFBcUMsUUFDQXJDLEtBQUFxQyxNQUFBaEMsVUFBQUcsT0FBQSxrQkFDQVIsS0FBQXFDLE1BQUFoQyxVQUFBdUMsSUFBQSxxQkFDQTVDLEtBQUFzQyxRQUFBLE1BTUEsV0FDQSxZQUtBLEtBQUEsR0FIQU8sTUFDQWhDLEVBQUFYLFNBQUFZLGlCQUFBLGtCQUVBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUFGLE9BQUFJLElBQUEsQ0FDQSxHQUFBK0IsR0FBQWpDLEVBQUFFLEdBQ0FvQixFQUFBVyxFQUFBN0IsYUFBQSxlQUNBNEIsR0FBQVYsR0FBQSxHQUFBRCxPQUFBQyxHQUdBVyxFQUFBbEMsaUJBQUEsUUFBQSxXQUdBLEdBQUFtQyxHQUFBL0MsS0FBQWlCLGFBQUEsZ0JBQ0FvQixFQUFBUSxFQUFBRSxHQUVBQyxFQUFBOUMsU0FBQStDLGNBQUEsU0FFQUQsR0FBQXBDLGlCQUFBLFFBQUEsV0FDQXlCLEVBQUFJLFNBR0FKLEVBQUFDLE9BQ0FELEVBQUFJLE9BRUFKLEVBQUFqQyxZQ2hGQSxJQUFBOEMsU0FBQSxXQUNBLFlBRUEsSUFBQUMsR0FBQWpELFNBQUErQyxjQUFBLGlCQUNBRyxFQUFBbEQsU0FBQStDLGNBQUEsaUJBQ0FJLEVBQUFuRCxTQUFBK0MsY0FBQSxnQkFDQUssRUFBQXBELFNBQUErQyxjQUFBLDBCQUNBTSxHQUFBLEVBQ0FDLEVBQUEsRUFDQUMsRUFBQSxDQUVBekQsTUFBQTBELGtCQUFBLFdBRUFQLEdBQ0FBLEVBQUF2QyxpQkFBQSxRQUFBWixLQUFBMkQsYUFHQVAsR0FDQUEsRUFBQXhDLGlCQUFBLFFBQUFnRCxHQUdBUCxHQUNBQSxFQUFBekMsaUJBQUEsUUFBQWdELEdBR0FOLEdBQ0FBLEVBQUExQyxpQkFBQSxRQUFBWixLQUFBNkQsYUFHQVIsSUFDQUEsRUFBQXpDLGlCQUFBLGFBQUFaLEtBQUE4RCxjQUNBVCxFQUFBekMsaUJBQUEsWUFBQVosS0FBQStELGFBQ0FWLEVBQUF6QyxpQkFBQSxXQUFBWixLQUFBZ0UsY0FJQWhFLEtBQUE2RCxZQUFBLFNBQUFJLEdBQ0FBLEVBQUFDLGtCQUdBLElBQUFDLEdBQUEsU0FBQUYsR0FDQVosRUFBQWhELFVBQUFHLE9BQUEsd0JBQ0E2QyxFQUFBZSxvQkFBQSxnQkFBQUQsR0FHQW5FLE1BQUEyRCxZQUFBLFdBQ0FOLEVBQUFoRCxVQUFBdUMsSUFBQSx3QkFDQVMsRUFBQWhELFVBQUF1QyxJQUFBLHFCQUNBUyxFQUFBekMsaUJBQUEsZ0JBQUF1RCxHQUdBLElBQUFQLEdBQUEsV0FDQVAsRUFBQWhELFVBQUF1QyxJQUFBLHdCQUNBUyxFQUFBaEQsVUFBQUcsT0FBQSxxQkFDQTZDLEVBQUF6QyxpQkFBQSxnQkFBQXVELElBR0FFLEVBQUEsV0FFQSxHQUFBZCxFQUFBLENBR0FlLHNCQUFBLFdBQ0FELEtBRUEsTUFBQUUsR0FBQUMsS0FBQS9DLElBQUEsRUFBQWdDLEVBQUFELEVBQ0FGLEdBQUFtQixNQUFBQyxVQUFBLGNBQUFILEVBQUEsT0FJQXZFLE1BQUE4RCxhQUFBLFNBQUFHLEdBRUFaLEVBQUFoRCxVQUFBQyxTQUFBLHVCQUlBa0QsRUFBQVMsRUFBQVUsUUFBQSxHQUFBQyxNQUNBbkIsRUFBQUQsRUFDQUQsR0FBQSxFQUVBZSxzQkFBQSxXQUNBRCxRQUlBckUsS0FBQStELFlBQUEsU0FBQUUsR0FFQSxHQUFBVixFQUFBLENBSUFFLEVBQUFRLEVBQUFVLFFBQUEsR0FBQUMsS0FDQSxNQUFBTCxHQUFBQyxLQUFBL0MsSUFBQSxFQUFBZ0MsRUFBQUQsRUFFQWUsR0FBQSxHQUNBTixFQUFBWSxtQkFJQTdFLEtBQUFnRSxXQUFBLFNBQUFDLEdBRUEsR0FBQVYsRUFBQSxDQUlBQSxHQUFBLENBRUEsTUFBQWdCLEdBQUFDLEtBQUEvQyxJQUFBLEVBQUFnQyxFQUFBRCxFQUNBRixHQUFBbUIsTUFBQUMsVUFBQSxHQUVBSCxFQUFBLEdBQ0FYLFFBTUEsV0FDQSxZQUVBLElBQUFrQixHQUFBLEdBQUE1QixRQUNBNEIsR0FBQXBCLHNCQ3pIQSxJQUFBcUIsVUFBQSxTQUFBQyxHQUNBLFlBRUEsSUFBQTVDLEdBQUFwQyxJQU9BLElBSkFBLEtBQUErRSxTQUFBN0UsU0FBQUMsZUFBQTZFLEdBQ0FoRixLQUFBc0MsUUFBQSxFQUdBLE9BQUF0QyxLQUFBK0UsU0FBQSxDQUdBLElBQUEsR0FEQXhDLEdBQUF2QyxLQUFBK0UsU0FBQXJFLHVCQUFBLGtCQUNBSyxFQUFBLEVBQUFBLEVBQUF3QixFQUFBNUIsT0FBQUksSUFBQSxDQUNBLEdBQUF5QixHQUFBRCxFQUFBeEIsRUFDQXlCLEdBQUE1QixpQkFBQSxRQUFBLFdBQ0F3QixFQUFBSyxTQUdBekMsS0FBQStFLFNBQUFuRSxpQkFBQSxnQkFBQSxXQUdBWixLQUFBSyxVQUFBQyxTQUFBLHlCQUNBTixLQUFBSyxVQUFBRyxPQUFBLDBCQUtBTixTQUFBVSxpQkFBQSxRQUFBLFNBQUE4QixHQUVBLEtBQUFBLEVBQUFDLFNBQUFQLEVBQUFFLFFBQ0FGLEVBQUFLLFNBTUF6QyxLQUFBSSxLQUFBLFdBQ0EsT0FBQUosS0FBQStFLFdBQ0EvRSxLQUFBK0UsU0FBQTFFLFVBQUF1QyxJQUFBLHFCQUNBNUMsS0FBQXNDLFFBQUEsSUFLQXRDLEtBQUF5QyxLQUFBLFdBQ0EsT0FBQXpDLEtBQUErRSxXQUNBL0UsS0FBQStFLFNBQUExRSxVQUFBRyxPQUFBLHFCQUNBUixLQUFBK0UsU0FBQTFFLFVBQUF1QyxJQUFBLHdCQUNBNUMsS0FBQXNDLFFBQUEsTUFPQSxXQUNBLFlBS0EsS0FBQSxHQUhBMkMsTUFDQXBFLEVBQUFYLFNBQUFZLGlCQUFBLHFCQUVBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUFGLE9BQUFJLElBQUEsQ0FDQSxHQUFBK0IsR0FBQWpDLEVBQUFFLEdBQ0FpRSxFQUFBbEMsRUFBQTdCLGFBQUEsa0JBQ0FnRSxHQUFBRCxHQUFBLEdBQUFELFVBQUFDLEdBR0FsQyxFQUFBbEMsaUJBQUEsUUFBQSxXQUdBLEdBQUFzRSxHQUFBbEYsS0FBQWlCLGFBQUEsbUJBQ0E4RCxFQUFBRSxFQUFBQyxHQUVBQyxFQUFBakYsU0FBQStDLGNBQUEsWUFFQWtDLEdBQUF2RSxpQkFBQSxRQUFBLFdBQ0FtRSxFQUFBdEMsU0FHQXNDLEVBQUF6QyxPQUNBeUMsRUFBQXRDLE9BRUFzQyxFQUFBM0UsWUNuRkEsSUFBQWdGLE1BQUEsU0FBQXRGLEVBQUFDLEdBQ0EsWUFPQUMsTUFBQXFGLElBQUF2RixFQUNBRSxLQUFBRCxHQUFBRyxTQUFBQyxlQUFBSixHQUVBQyxLQUFBeUMsS0FBQSxXQUlBLElBQUEsR0FIQTZDLEdBQUF0RixLQUFBcUYsSUFBQTlELFdBQUFnRSxTQUNBQyxFQUFBeEYsS0FBQUQsR0FBQXdCLFdBQUFnRSxTQUVBeEUsRUFBQSxFQUFBQSxFQUFBdUUsRUFBQTNFLE9BQUFJLElBQ0F1RSxFQUFBdkUsR0FBQVYsVUFBQUcsT0FBQSxxQkFHQSxLQUFBLEdBQUFpRixHQUFBLEVBQUFBLEVBQUFELEVBQUE3RSxPQUFBOEUsSUFDQUQsRUFBQUMsR0FBQXBGLFVBQUFHLE9BQUEsd0JBSUFSLEtBQUFJLEtBQUEsV0FDQUosS0FBQXFGLElBQUFoRixVQUFBdUMsSUFBQSxzQkFDQTVDLEtBQUFELEdBQUFNLFVBQUF1QyxJQUFBLDBCQU1BLFdBQ0EsWUFHQSxJQUFBOEMsR0FBQXhGLFNBQUFRLHVCQUFBLGFBR0FpRixPQUFBQyxLQUFBRixFQUVBLEtBQUEsR0FBQTNFLEdBQUEsRUFBQUEsRUFBQTJFLEVBQUEvRSxPQUFBSSxJQUFBLENBQ0EsR0FBQThFLEdBQUFILEVBQUEzRSxFQUdBOEUsR0FBQWpGLGlCQUFBLFFBQUEsV0FHQSxHQUFBYixHQUFBQyxLQUFBaUIsYUFBQSxpQkFDQW9FLEVBQUEsR0FBQUQsTUFBQXBGLEtBQUFELEVBRUEsV0FBQUEsSUFDQUMsS0FBQUssVUFBQUMsU0FBQSxjQUNBK0UsRUFBQTVDLE9BQ0E0QyxFQUFBakYsV0FTQTBGLE9BQUFsRixpQkFBQSxXQUFBLFNBQUE4QixHQWlCQXFELE1BQUEsRUFDQUEsTUFBQSxFQUNBQSxPQUFBTCxFQUFBL0UsU0FDQW9GLE1BQUFMLEVBQUEvRSxPQUFBLEdBR0FxRixRQUFBQyxJQUFBRixXQ3RGQSxJQUFBRyxPQUFBLFdBQ0EsZUFNQSxXQUNBLFlBQ0FBIiwiZmlsZSI6InN0ZXdlZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAgICB2YXIgRHJvcGRvd24gPSBmdW5jdGlvbihzZWxlY3RlZCwgaWQpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIHRoaXMuZHJvcGRvd24gPSBzZWxlY3RlZDtcbiAgICAgICAgdGhpcy5pZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblxuXG4gICAgICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5pZC5jbGFzc0xpc3QuY29udGFpbnMoJ2Ryb3Bkb3duLS12aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkcm9wZG93bi0tdmlzaWJsZScpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbMF0uY2xhc3NMaXN0LnJlbW92ZShcImRyb3Bkb3duLS12aXNpYmxlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlkLmNsYXNzTmFtZSArPSBcIiBkcm9wZG93bi0tdmlzaWJsZVwiO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaWQuY2xhc3NOYW1lICs9IFwiIGRyb3Bkb3duLS1hbmltYXRhYmxlXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5pZC5jbGFzc0xpc3QucmVtb3ZlKFwiZHJvcGRvd24tLXZpc2libGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlkLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2Ryb3Bkb3duLS1hbmltYXRhYmxlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLS1hbmltYXRhYmxlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuXG4gICAgISBmdW5jdGlvbigpe1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgLyogZ2V0IGRyb3Bkb3duIGl0ZW0gKi9cbiAgICAgICAgdmFyIGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3N0ZXdlZC1kcm9wZG93bl0nKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBteURyb3Bkb3duID0gZWxlbXNbaV07XG5cbiAgICAgICAgICAgIC8qIG9uIGNsaWNrIGluIHRhYiAqL1xuICAgICAgICAgICAgbXlEcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICAgICAgICAgIHZhciBpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdzdGV3ZWQtZHJvcGRvd24nKVxuICAgICAgICAgICAgICAgIHZhciBkcm9wZG93biA9IG5ldyBEcm9wZG93bih0aGlzLCBpZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSApIHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7ICAgICAgICBcblxuICAgICAgICB9XG5cbiAgICB9KCk7XG5cblxuIiwidmFyIEZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgY29uc3QgVkFMSURBVEUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3Rld2VkLXZhbGlkYXRlPVwidHJ1ZVwiXScpO1xuICAgIHZhciBpbnB1dHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZXh0ZmllbGRfX2lucHV0Jyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIGlmICghIGlucHV0c1tpXS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRzW2ldO1xuICAgICAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkJztcblxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgICAgICAgICBpZiAoVkFMSURBVEUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IE1JTiA9ICh0aGlzLm1pbiA9PSAnJykgPyAoKHRoaXMudHlwZSA9PSAndGVsJykgPyA5IDogMiApIDogdGhpcy5taW4sXG4gICAgICAgICAgICAgICAgICAgIE1BWCA9ICh0aGlzLm1heCA9PSAnJykgPyAoKHRoaXMudHlwZSA9PSAndGVsJykgPyAxMyA6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSICkgOiB0aGlzLm1heCxcbiAgICAgICAgICAgICAgICAgICAgRU1BSUwgPSAvXihbXFx3LV0rKD86XFwuW1xcdy1dKykqKUAoKD86W1xcdy1dK1xcLikqXFx3W1xcdy1dezAsNjZ9KVxcLihbYS16XXsyLDZ9KD86XFwuW2Etel17Mn0pPykkL2k7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PSAnc2VsZWN0LW9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLXZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS1pbnZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT0gJ3RleHRhcmVhJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0tdmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLWludmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAodGhpcy52YWx1ZS5sZW5ndGggPj0gTUlOICkgJiYgKHRoaXMudmFsdWUubGVuZ3RoIDw9IE1BWCkgKSAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gJ2VtYWlsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRU1BSUwudGVzdCh0aGlzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS12YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLWludmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS12YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLWludmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS1maWxsZWQnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4hZnVuY3Rpb24oKXtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgbmV3IEZvcm0oKTtcbn0oKTsiLCJ2YXIgTW9kYWwgPSBmdW5jdGlvbihtb2RhbElkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgbnVtID0gMTtcblxuICAgIHRoaXMubW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElkKTtcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgIFxuICAgIC8qIENvbnN0cnVjdG9yICovXG4gICAgaWYodGhpcy5tb2RhbCAhPT0gbnVsbCkge1xuXG4gICAgICAgIHZhciBjbG9zZUJ1dHRvbnMgPSB0aGlzLm1vZGFsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21vZGFsLWNsb3NlJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvc2VCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnRuX2Nsb3NlID0gY2xvc2VCdXR0b25zW2ldO1xuICAgICAgICAgICAgYnRuX2Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsLS1hbmltYXRhYmxlJykpe1xuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLWFuaW1hdGFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vYWRkIGtleSBjbG9zZSBldmVudFxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0J1xuXG4gICAgICAgICAgICBpZihlLmtleUNvZGUgPT09IDI3ICYmIF9zZWxmLmlzT3Blbikge1xuICAgICAgICAgICAgICAgIF9zZWxmLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyogU2hvdyBDdXJyZW50IE1vZGFsICovXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZih0aGlzLm1vZGFsICE9PSBudWxsKXtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKiBIaWRlIEN1cnJlbnQgTW9kYWwgKi9cbiAgICB0aGlzLmhpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICBpZih0aGlzLm1vZGFsICE9PSBudWxsKXtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLWFuaW1hdGFibGUnKTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuXG4hIGZ1bmN0aW9uKCl7XG4gICAndXNlIHN0cmljdCc7XG5cbiAgIHZhciBtZW1vcnlfbW9kYWxzID0gW107XG4gICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3Rld2VkLW1vZGFsXScpO1xuXG4gICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW0gPSBlbGVtc1tpXTtcbiAgICB2YXIgbW9kYWxJZCA9IGVsZW0uZ2V0QXR0cmlidXRlKCdzdGV3ZWQtbW9kYWwnKTtcbiAgICBtZW1vcnlfbW9kYWxzW21vZGFsSWRdID0gbmV3IE1vZGFsKG1vZGFsSWQpO1xuXG4gICAgLyogRWVsZW1lbnQgY2xpY2sgKi9cbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICB2YXIgY3VycmVudF9tb2RhbCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdzdGV3ZWQtbW9kYWwnKTtcbiAgICAgICAgdmFyIG1vZGFsID0gbWVtb3J5X21vZGFsc1tjdXJyZW50X21vZGFsXTtcblxuICAgICAgICB2YXIgbW9kYWxCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG5cbiAgICAgICAgbW9kYWxCb2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2RhbC5oaWRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChtb2RhbC5pc09wZW4pIHtcbiAgICAgICAgICAgIG1vZGFsLmhpZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vZGFsLnNob3coKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxufSgpOyIsInZhciBTaWRlTmF2ID0gZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyICRzaG93QnV0dG9uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbWVudS1zaG93JyksXG4gICAgJGhpZGVCdXR0b25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZW51LWhpZGUnKSxcbiAgICAkc2lkZU5hdkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXNpZGUtbmF2JyksXG4gICAgJHNpZGVOYXZDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaWRlLW5hdi1jb250YWluZXInKSxcbiAgICB0b3VjaGluZ1NpZGVOYXYgPSBmYWxzZSxcbiAgICBzdGFydFggPSAwLFxuICAgIGN1cnJlbnRYID0gMDtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaWYgKCRzaG93QnV0dG9uRWwpIHtcbiAgICAgICAgICAgICRzaG93QnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnNob3dTaWRlTmF2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkaGlkZUJ1dHRvbkVsKSB7XG4gICAgICAgICAgICAkaGlkZUJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZVNpZGVOYXYpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzaWRlTmF2RWwpIHtcbiAgICAgICAgICAgICRzaWRlTmF2RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlU2lkZU5hdik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJHNpZGVOYXZDb250YWluZXJFbCkge1xuICAgICAgICAgICAgJHNpZGVOYXZDb250YWluZXJFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYmxvY2tDbGlja3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzaWRlTmF2RWwpIHtcbiAgICAgICAgICAgICRzaWRlTmF2RWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaFN0YXJ0KTtcbiAgICAgICAgICAgICRzaWRlTmF2RWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSk7XG4gICAgICAgICAgICAkc2lkZU5hdkVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYmxvY2tDbGlja3MgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIHZhciBvblRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgJHNpZGVOYXZFbC5jbGFzc0xpc3QucmVtb3ZlKCdzaWRlLW5hdi0tYW5pbWF0YWJsZScpO1xuICAgICAgICAkc2lkZU5hdkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBvblRyYW5zaXRpb25FbmQpO1xuICAgIH1cblxuICAgIHRoaXMuc2hvd1NpZGVOYXYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNpZGVOYXZFbC5jbGFzc0xpc3QuYWRkKCdzaWRlLW5hdi0tYW5pbWF0YWJsZScpO1xuICAgICAgICAkc2lkZU5hdkVsLmNsYXNzTGlzdC5hZGQoJ3NpZGUtbmF2LS12aXNpYmxlJyk7XG4gICAgICAgICRzaWRlTmF2RWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIG9uVHJhbnNpdGlvbkVuZCk7XG4gICAgfVxuXG4gICAgdmFyIGhpZGVTaWRlTmF2ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzaWRlTmF2RWwuY2xhc3NMaXN0LmFkZCgnc2lkZS1uYXYtLWFuaW1hdGFibGUnKTtcbiAgICAgICAgJHNpZGVOYXZFbC5jbGFzc0xpc3QucmVtb3ZlKCdzaWRlLW5hdi0tdmlzaWJsZScpO1xuICAgICAgICAkc2lkZU5hdkVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBvblRyYW5zaXRpb25FbmQpO1xuICAgIH1cblxuICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICBpZiAoIXRvdWNoaW5nU2lkZU5hdikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlWCA9IE1hdGgubWluKDAsIGN1cnJlbnRYIC0gc3RhcnRYKTtcbiAgICAgICAgJHNpZGVOYXZDb250YWluZXJFbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoXCIgKyB0cmFuc2xhdGVYICsgXCJweClcIjtcblxuICAgIH1cblxuICAgIHRoaXMub25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZXZ0KSB7XG5cbiAgICAgICAgaWYgKCEkc2lkZU5hdkVsLmNsYXNzTGlzdC5jb250YWlucygnc2lkZS1uYXYtLXZpc2libGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnRYID0gZXZ0LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIGN1cnJlbnRYID0gc3RhcnRYO1xuICAgICAgICB0b3VjaGluZ1NpZGVOYXYgPSB0cnVlO1xuXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLm9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZXZ0KSB7XG5cbiAgICAgICAgaWYgKCF0b3VjaGluZ1NpZGVOYXYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnRYID0gZXZ0LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZVggPSBNYXRoLm1pbigwLCBjdXJyZW50WCAtIHN0YXJ0WCk7XG5cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVggPCAwKSB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMub25Ub3VjaEVuZCA9IGZ1bmN0aW9uKGV2dCkge1xuXG4gICAgICAgIGlmICghdG91Y2hpbmdTaWRlTmF2KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0b3VjaGluZ1NpZGVOYXYgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCB0cmFuc2xhdGVYID0gTWF0aC5taW4oMCwgY3VycmVudFggLSBzdGFydFgpO1xuICAgICAgICAkc2lkZU5hdkNvbnRhaW5lckVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuXG4gICAgICAgIGlmICh0cmFuc2xhdGVYIDwgMCkge1xuICAgICAgICAgICAgaGlkZVNpZGVOYXYoKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblxuISBmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc2lkZW5hdiA9IG5ldyBTaWRlTmF2KCk7XG4gICAgc2lkZW5hdi5hZGRFdmVudExpc3RlbmVycygpO1xuXG59KCk7XG4iLCJ2YXIgc25hY2tiYXIgPSBmdW5jdGlvbihzbmFja2JhcklkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgbnVtID0gMTtcbiAgICBcbiAgICB0aGlzLnNuYWNrYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc25hY2tiYXJJZCk7XG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcblxuICAgIC8qIENvbnN0cnVjdG9yICovXG4gICAgaWYgKHRoaXMuc25hY2tiYXIgIT09IG51bGwpIHtcblxuICAgICAgICB2YXIgY2xvc2VCdXR0b25zID0gdGhpcy5zbmFja2Jhci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzbmFja2Jhci1jbG9zZScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsb3NlQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGJ0bl9jbG9zZSA9IGNsb3NlQnV0dG9uc1tpXTtcbiAgICAgICAgICAgIGJ0bl9jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3NlbGYuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc25hY2tiYXIuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnc25hY2tiYXItLWFuaW1hdGFibGUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnc25hY2tiYXItLWFuaW1hdGFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogQWRkIGtleSBjbG9zZSBldmVudCAqL1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PT0gMjcgJiYgX3NlbGYuaXNPcGVuKXtcbiAgICAgICAgICAgICAgICBfc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qIFNob3cgQ3VycmVudCBzbmFja2JhciAqL1xuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYodGhpcy5zbmFja2JhciAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLmNsYXNzTGlzdC5hZGQoJ3NuYWNrYmFyLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyogSGlkZSBDdXJyZW50IHNuYWNrYmFyICovXG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy5zbmFja2JhciAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3NuYWNrYmFyLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLmNsYXNzTGlzdC5hZGQoJ3NuYWNrYmFyLS1hbmltYXRhYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxufTtcblxuLy9TSE9XIHNuYWNrYmFyXG4hIGZ1bmN0aW9uKCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG1lbW9yeV9zbmFja2JhcnMgPSBbXTtcbiAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3Rld2VkLXNuYWNrYmFyXScpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZWxlbSA9IGVsZW1zW2ldO1xuICAgICAgICB2YXIgc25hY2tiYXJJZCA9IGVsZW0uZ2V0QXR0cmlidXRlKCdzdGV3ZWQtc25hY2tiYXInKTtcbiAgICAgICAgbWVtb3J5X3NuYWNrYmFyc1tzbmFja2JhcklkXSA9IG5ldyBzbmFja2JhcihzbmFja2JhcklkKTtcblxuICAgICAgICAvKiBFbGVtZW50IGNsaWNrICovXG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudF9zbmFja2JhciA9IHRoaXMuZ2V0QXR0cmlidXRlKCdzdGV3ZWQtc25hY2tiYXInKTtcbiAgICAgICAgICAgIHZhciBzbmFja2JhciA9IG1lbW9yeV9zbmFja2JhcnNbY3VycmVudF9zbmFja2Jhcl07XG5cbiAgICAgICAgICAgIHZhciBzbmFja2JhckJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc25hY2tiYXInKTtcblxuICAgICAgICAgICAgc25hY2tiYXJCb2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc25hY2tiYXIuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzbmFja2Jhci5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICBzbmFja2Jhci5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNuYWNrYmFyLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSgpOyIsIiAgICB2YXIgVGFicyA9IGZ1bmN0aW9uKHNlbGVjdGVkLCBpZCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgY29uc3QgS0VZX0xFRlQgPSAzNyxcbiAgICAgICAgICAgIEtFWV9VUCA9IDM4LFxuICAgICAgICAgICAgS0VZX1JJR0hUID0gMzksXG4gICAgICAgICAgICBLRVlfRE9XTiA9IDQwO1xuXG4gICAgICAgIHRoaXMudGFiID0gc2VsZWN0ZWQ7XG4gICAgICAgIHRoaXMuaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG5cbiAgICAgICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBwYXJlbnRUYWJzID0gdGhpcy50YWIucGFyZW50Tm9kZS5jaGlsZHJlbjtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uc1RhYnMgPSB0aGlzLmlkLnBhcmVudE5vZGUuY2hpbGRyZW47XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyZW50VGFicy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhcmVudFRhYnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgndGFic19faXRlbS0tYWN0aXZlJyk7XG4gICAgICAgICAgICB9ICAgIFxuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlY3Rpb25zVGFicy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zVGFic1tqXS5jbGFzc0xpc3QucmVtb3ZlKCd0YWItc2VjdGlvbi0tYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy50YWIuY2xhc3NMaXN0LmFkZCgndGFic19faXRlbS0tYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLmlkLmNsYXNzTGlzdC5hZGQoJ3RhYi1zZWN0aW9uLS1hY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuXG4gICAgISBmdW5jdGlvbigpe1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgLyogZ2V0IHRhYnMgaXRlbSAqL1xuICAgICAgICB2YXIgdGFicyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RhYnNfX2l0ZW0nKTtcblxuICAgICAgICAvKiBzYXZlIGluIGFycmF5IGFsbCB0YWJzICovXG4gICAgICAgIGNvbnN0IHRhYnNBcnJheSA9IEFycmF5LmZyb20odGFicyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbXlUYWIgPSB0YWJzW2ldO1xuXG4gICAgICAgICAgICAvKiBvbiBjbGljayBpbiB0YWIgKi9cbiAgICAgICAgICAgIG15VGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3N0ZXdlZC10YWItaWQnKVxuICAgICAgICAgICAgICAgIHZhciB0YWIgPSBuZXcgVGFicyh0aGlzLCBpZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIGlkICE9PSBcImZhbHNlXCIgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWIuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTsgICAgICAgIFxuXG4gICAgICAgIH1cblxuICAgICAgICAvKiBUT0RPOiBDaGFuZ2UgdGFiIHVzaW5nIGtleWJvYXJkICovXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICAgICAgLy8gc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgICAgIC8vICAgICBjYXNlIEtFWV9VUDpcbiAgICAgICAgICAgIC8vICAgICBjYXNlIEtFWV9MRUZUOlxuICAgICAgICAgICAgLy8gICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAvLyAgICAgY2FzZSBLRVlfUklHSFQ6XG4gICAgICAgICAgICAvLyAgICAgY2FzZSBLRVlfRE9XTjpcbiAgICAgICAgICAgIC8vICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcblxuICAgICAgICAgICAgLy8gICAgIGRlZmF1bHQ6IGJyZWFrO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA+PSB0YWJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGFicy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH0oKTtcblxuXG4iLCJ2YXIgdG9hc3QgPSBmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cblxufTtcblxuXG4hZnVuY3Rpb24oKXtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdG9hc3QoKTtcbn0oKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
