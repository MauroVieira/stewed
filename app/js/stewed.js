"use strict";function Modal(t){var i=this;this.modal=document.getElementById(t),this.isOpen=!1,this.backgroundColor="#000",this.opacityOverlay=.6,this.transitionStyle=!0,this.keyboard=!0,this.durationIn=.477,this.durationOut=.177;for(var o=this.modal.getElementsByClassName("modal-close"),n=0;n<o.length;n++){var a=o[n];a.addEventListener("click",function(){i.hide()})}this.show=function(){this.modal.style.visibility="visible",this.isOpen=!0},this.hide=function(){this.modal.style.visibility="hidden",this.isOpen=!1}}$(function(){$(document).on("change",".file-path",function(){var t=$(".file-path > input[type=text]"),i=$(".upload").val();t.val(i),t.addClass("valid")})}),$(function(){$.fn.extend({showTab:function(t){$(".tabs").find(".active").removeClass("active"),$(".tabs").find("a[href$="+t+"]").addClass("active"),$("body").find(".tab-section").css({visibility:"hidden",display:"none"}),$(t).css({visibility:"visible",display:"block"})}}),$.fn.extend({tabs:function(){var t=$(".tabs li .active").attr("href")||"#"+$(this).data("target");$tab=$(t),$tab.css({visibility:"visible",display:"block"}),$(document).on("keyup",function(t,i){if(t.preventDefault(),37===t.keyCode||38===t.keyCode){var o=$tab.prev().attr("id");"undefined"!=typeof o&&($tab.showTab("#"+o),$tab=$("#"+o))}if(39===t.keyCode||40===t.keyCode){var n=$tab.next().attr("id");"undefined"!=typeof n&&($tab.showTab("#"+n),$tab=$("#"+n))}}),$(this).click(function(t){t.preventDefault();var i=$(this).attr("href")||"#"+$(this).data("target");$tab=$(i),$tab.showTab(i)})}}),$.fn.extend({openModal:function(t){$("body").css("overflow","hidden");var i=this.selector;$overlay=$(".modal-overlay"),$modal=$(i);var o={backgroundColor:"#000",opacityOverlay:.6,transitionStyle:!0,keyboard:!0,durationIn:.477,durationOut:.177};t=$.extend(o,t),$("body").find(".modal-overlay").css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s",background:t.backgroundColor,opacity:t.opacityOverlay}),t.transitionStyle?$modal.css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s",visibility:"visible",transform:"scale(1)",opacity:"1",top:"10%"}):$modal.css({visibility:"visible",transform:"scale(1)",opacity:"1",top:"10%"}),$modal.find(".modal-close").on("click",function(i){i.preventDefault(),$modal.closeModal(t)}),t.keyboard&&$(document).on("keyup",function(i){27===i.keyCode&&$modal.closeModal(t)})}}),$.fn.extend({closeModal:function(t){$overlay.removeClass("state-show"),$(".modal-overlay").remove(),$("body").css("overflow","auto"),t.transitionStyle?$modal.css({WebkitTransition:"all "+t.durationOut+"s",MozTransition:"all "+t.durationOut+"s",MsTransition:"all "+t.durationOut+"s",OTransition:"all "+t.durationOut+"s",transition:"all "+t.durationOut+"s",visibility:"hidden",transform:"scale(0.7)",opacity:"0",top:"30%"}):$modal.css({visibility:"hidden",opacity:"0",top:"30%"})}}),$.fn.extend({callModal:function(t){return this.each(function(){$(this).click(function(i){$overlayAppend=$('<div class="modal-overlay"></div>'),$("body").append($overlayAppend);var o=$(this).attr("href")||"#"+$(this).data("target");$(o).openModal(t),$(".modal-overlay").click(function(i){$(o).closeModal(t)})})})}}),$.fn.extend({openDropdown:function(t){var i=this.selector;$overlay=$(".modal-overlay"),$drop=$(i);var o={keyboard:!0,alignment:"left",durationIn:.4,durationOut:.3};t=$.extend(o,t),$drop.css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s","text-align":t.alignment,visibility:"visible",opacity:"1",zIndex:"1",top:"0"}),$drop.find(".modal-close").on("click",function(i){i.preventDefault(),$drop.closeModal(t)}),t.keyboard&&$(document).on("keyup",function(i){27===i.keyCode&&$drop.closeDropDown(t)})}}),$.fn.extend({closeDropDown:function(t){$drop.css({WebkitTransition:"all "+t.durationOut+"s",MozTransition:"all "+t.durationOut+"s",MsTransition:"all "+t.durationOut+"s",OTransition:"all "+t.durationOut+"s",transition:"all "+t.durationOut+"s",visibility:"hidden",opacity:"0",zIndex:"-1",top:"40px"})}}),$.fn.extend({dropdown:function(t){return this.each(function(){$(this).click(function(i){var o=$(this).attr("href")||"#"+$(this).data("target");$(o).hasClass("dropdown_open")?($(o).closeDropDown(t),$(o).removeClass("dropdown_open")):($(o).addClass("dropdown_open"),$(o).openDropdown(t))})})}})}),console.log("Modal (v0.1.1)"),!function(){for(var t=[],i=document.querySelectorAll("[stewed-modal]"),o=0;o<i.length;o++){var n=i[o],a=n.getAttribute("stewed-modal");t[a]=new Modal(a),n.addEventListener("click",function(){var i=this.getAttribute("stewed-modal"),o=t[i];o.isOpen?o.hide():o.show()});n.getElementsByClassName(n.getAttribute("stewed-modal"))}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0ZXdlZC5qcyIsIm1vZGFsL21vZGFsLmpzIl0sIm5hbWVzIjpbIk1vZGFsIiwibW9kZWxJRCIsIl9zZWxmIiwidGhpcyIsIm1vZGFsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlzT3BlbiIsImJhY2tncm91bmRDb2xvciIsIm9wYWNpdHlPdmVybGF5IiwidHJhbnNpdGlvblN0eWxlIiwia2V5Ym9hcmQiLCJkdXJhdGlvbkluIiwiZHVyYXRpb25PdXQiLCJidXR0b25zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImkiLCJsZW5ndGgiLCJidG5fY2xvc2UiLCJhZGRFdmVudExpc3RlbmVyIiwiaGlkZSIsInNob3ciLCJzdHlsZSIsInZpc2liaWxpdHkiLCIkIiwib24iLCJpbnB1dF9maWxlIiwidXBsb2FkX2ZpbGUiLCJ2YWwiLCJhZGRDbGFzcyIsImZuIiwiZXh0ZW5kIiwic2hvd1RhYiIsInRhYklEIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiY3NzIiwiZGlzcGxheSIsInRhYnMiLCJhdHRyIiwiZGF0YSIsIiR0YWIiLCJlIiwicHJldmVudERlZmF1bHQiLCJrZXlDb2RlIiwiUFJFViIsInByZXYiLCJORVhUIiwibmV4dCIsImNsaWNrIiwib3Blbk1vZGFsIiwib3B0aW9ucyIsIm1vZGFsSUQiLCJzZWxlY3RvciIsIiRvdmVybGF5IiwiJG1vZGFsIiwiZGVmYXVsdHMiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk1zVHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsImJhY2tncm91bmQiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwidG9wIiwiZXZlbnQiLCJjbG9zZU1vZGFsIiwicmVtb3ZlIiwiY2FsbE1vZGFsIiwiZWFjaCIsIiRvdmVybGF5QXBwZW5kIiwiYXBwZW5kIiwib3BlbkRyb3Bkb3duIiwiZHJvcGRvd25JRCIsIiRkcm9wIiwiYWxpZ25tZW50IiwidGV4dC1hbGlnbiIsInpJbmRleCIsImNsb3NlRHJvcERvd24iLCJkcm9wZG93biIsImhhc0NsYXNzIiwiY29uc29sZSIsImxvZyIsIm1lbW9yeV9tb2RhbHMiLCJlbGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGVtIiwiZ2V0QXR0cmlidXRlIiwiY3VycmVudF9tb2RhbCJdLCJtYXBwaW5ncyI6IkFBQUEsWUNJQSxTQUFBQSxPQUFBQyxHQUNBLEdBQUFDLEdBQUFDLElBQ0FBLE1BQUFDLE1BQUFDLFNBQUFDLGVBQUFMLEdBQ0FFLEtBQUFJLFFBQUEsRUFFQUosS0FBQUssZ0JBQUEsT0FDQUwsS0FBQU0sZUFBQSxHQUNBTixLQUFBTyxpQkFBQSxFQUNBUCxLQUFBUSxVQUFBLEVBQ0FSLEtBQUFTLFdBQUEsS0FDQVQsS0FBQVUsWUFBQSxJQUlBLEtBQUEsR0FEQUMsR0FBQVgsS0FBQUMsTUFBQVcsdUJBQUEsZUFDQUMsRUFBQSxFQUFBQSxFQUFBRixFQUFBRyxPQUFBRCxJQUFBLENBQ0EsR0FBQUUsR0FBQUosRUFBQUUsRUFDQUUsR0FBQUMsaUJBQUEsUUFBQSxXQUNBakIsRUFBQWtCLFNBS0FqQixLQUFBa0IsS0FBQSxXQUVBbEIsS0FBQUMsTUFBQWtCLE1BQUFDLFdBQUEsVUFDQXBCLEtBQUFJLFFBQUEsR0FFQUosS0FBQWlCLEtBQUEsV0FDQWpCLEtBQUFDLE1BQUFrQixNQUFBQyxXQUFBLFNBQ0FwQixLQUFBSSxRQUFBLEdEL0JBaUIsRUFBQSxXQUdBQSxFQUFBbkIsVUFBQW9CLEdBQUEsU0FBQSxhQUFBLFdBQ0EsR0FBQUMsR0FBQUYsRUFBQSxpQ0FDQUcsRUFBQUgsRUFBQSxXQUFBSSxLQUNBRixHQUFBRSxJQUFBRCxHQUNBRCxFQUFBRyxTQUFBLGFBS0FMLEVBQUEsV0FDQUEsRUFBQU0sR0FBQUMsUUFDQUMsUUFBQSxTQUFBQyxHQUVBVCxFQUFBLFNBQUFVLEtBQUEsV0FBQUMsWUFBQSxVQUNBWCxFQUFBLFNBQUFVLEtBQUEsV0FBQUQsRUFBQSxLQUFBSixTQUFBLFVBRUFMLEVBQUEsUUFBQVUsS0FBQSxnQkFBQUUsS0FDQWIs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QUEsUUFBQSxXQUNBLEdBQUFzRSxHQUFBdEYsS0FBQXFGLGFBQUEsZ0JBRUFwRixFQUFBZ0YsRUFBQUssRUFDQXJGLEdBQUFHLE9BQ0FILEVBQUFnQixPQUVBaEIsRUFBQWlCLFFBS0FrRSxHQUFBeEUsdUJBQUF3RSxFQUFBQyxhQUFBIiwiZmlsZSI6InN0ZXdlZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXG5cbiQoZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqIFVwbG9hZCB0aGUgZmlsZSAqKi9cbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy5maWxlLXBhdGgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbnB1dF9maWxlID0gJCgnLmZpbGUtcGF0aCA+IGlucHV0W3R5cGU9dGV4dF0nKTtcbiAgICAgICAgdmFyIHVwbG9hZF9maWxlID0gJCgnLnVwbG9hZCcpLnZhbCgpO1xuICAgICAgICBpbnB1dF9maWxlLnZhbCh1cGxvYWRfZmlsZSk7XG4gICAgICAgIGlucHV0X2ZpbGUuYWRkQ2xhc3MoJ3ZhbGlkJylcbiAgICB9KTtcblxufSk7XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgc2hvd1RhYjogZnVuY3Rpb24odGFiSUQpIHtcblxuICAgICAgICAgICAgJCggJy50YWJzJyApLmZpbmQoICcuYWN0aXZlJyApLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xuICAgICAgICAgICAgJCggJy50YWJzJyApLmZpbmQoICdhW2hyZWYkPScgKyB0YWJJRCArICddJyApLmFkZENsYXNzKCAnYWN0aXZlJyApO1xuXG4gICAgICAgICAgICAkKCAnYm9keScgKS5maW5kKCAnLnRhYi1zZWN0aW9uJyApLmNzcyh7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgOiAnaGlkZGVuJywgXG4gICAgICAgICAgICAgICAgZGlzcGxheSAgICAgICAgOiAnbm9uZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCB0YWJJRCApLmNzcyh7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgOiAndmlzaWJsZScsIFxuICAgICAgICAgICAgICAgIGRpc3BsYXkgICAgICAgIDogJ2Jsb2NrJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgJC5mbi5leHRlbmQoe1xuICAgICAgICB0YWJzOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyIHRhYklEID0gJChcIi50YWJzIGxpIC5hY3RpdmVcIikuYXR0cihcImhyZWZcIikgfHwgJyMnICsgJCh0aGlzKS5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICR0YWIgPSAkKHRhYklEKTtcbiAgICAgICAgICAgICR0YWIuY3NzKHtcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5ICAgICA6ICd2aXNpYmxlJywgXG4gICAgICAgICAgICAgICAgZGlzcGxheSAgICAgICAgOiAnYmxvY2snXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgZnVuY3Rpb24oZSwgdGFiSUQpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzcgfHwgZS5rZXlDb2RlID09PSAzOCkgeyBcbiAgICAgICAgICAgICAgICAgICAgdmFyIFBSRVYgPSAkdGFiLnByZXYoKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgUFJFViAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRhYi5zaG93VGFiKCcjJyArIFBSRVYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRhYiA9ICQoJyMnICsgUFJFVik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzkgfHwgZS5rZXlDb2RlID09PSA0MCkgeyBcbiAgICAgICAgICAgICAgICAgICAgdmFyIE5FWFQgPSAkdGFiLm5leHQoKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgTkVYVCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRhYi5zaG93VGFiKCcjJyArIE5FWFQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRhYiA9ICQoJyMnICsgTkVYVCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciB0YWJJRCA9ICQodGhpcykuYXR0cihcImhyZWZcIikgfHwgJyMnICsgJCh0aGlzKS5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICAgICAkdGFiID0gJCh0YWJJRCk7XG4gICAgICAgICAgICAgICAgJHRhYi5zaG93VGFiKHRhYklEKTtcblxuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgfSk7XG5cbiQuZm4uZXh0ZW5kKHtcbiAgICBvcGVuTW9kYWw6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgICAgICAkKFwiYm9keVwiKS5jc3MoIFwib3ZlcmZsb3dcIiwgXCJoaWRkZW5cIiApO1xuICAgICAgICB2YXIgbW9kYWxJRCA9IHRoaXMuc2VsZWN0b3I7XG5cbiAgICAgICAgJG92ZXJsYXkgPSAkKCcubW9kYWwtb3ZlcmxheScpO1xuICAgICAgICAkbW9kYWwgPSAkKG1vZGFsSUQpO1xuXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA6ICcjMDAwJyxcbiAgICAgICAgICAgIG9wYWNpdHlPdmVybGF5ICA6IDAuNiwgXG4gICAgICAgICAgICB0cmFuc2l0aW9uU3R5bGUgOiB0cnVlLFxuICAgICAgICAgICAga2V5Ym9hcmQgICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uSW4gICAgICA6IDAuNDc3LFxuICAgICAgICAgICAgZHVyYXRpb25PdXQgICAgIDogMC4xNzdcbiAgICAgICAgfTtcblxuICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpOyAgXG5cbiAgICAgICAgJChcImJvZHlcIikuZmluZCgnLm1vZGFsLW92ZXJsYXknKS5jc3MoeyBcbiAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICBNb3pUcmFuc2l0aW9uICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgTXNUcmFuc2l0aW9uICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICB0cmFuc2l0aW9uICAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgYmFja2dyb3VuZCAgICAgICAgICA6IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6IG9wdGlvbnMub3BhY2l0eU92ZXJsYXkgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnRyYW5zaXRpb25TdHlsZSkge1xuICAgICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbiAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgICAgICBNb3pUcmFuc2l0aW9uICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgICAgIE1zVHJhbnNpdGlvbiAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICAgICAgT1RyYW5zaXRpb24gICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uICAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgICAgICAgICAgOiAndmlzaWJsZScsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtICAgICAgICAgICA6ICdzY2FsZSgxKScsXG4gICAgICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6ICcxJyxcbiAgICAgICAgICAgICAgICB0b3AgICAgICAgICAgICAgICAgIDogJzEwJSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgICAgICA6ICd2aXNpYmxlJyxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gICAgICAgICAgIDogJ3NjYWxlKDEpJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5ICAgICAgICAgICAgIDogJzEnLFxuICAgICAgICAgICAgICAgIHRvcCAgICAgICAgICAgICAgICAgOiAnMTAlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAkbW9kYWwuZmluZChcIi5tb2RhbC1jbG9zZVwiKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICRtb2RhbC5jbG9zZU1vZGFsKG9wdGlvbnMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAob3B0aW9ucy5rZXlib2FyZCkge1xuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7IFxuICAgICAgICAgICAgICAgICAgICAkbW9kYWwuY2xvc2VNb2RhbChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgY2xvc2VNb2RhbDogZnVuY3Rpb24ob3B0aW9ucykge1xuXG4gICAgICAgICRvdmVybGF5LnJlbW92ZUNsYXNzKCdzdGF0ZS1zaG93Jyk7XG4gICAgICAgICQoXCIubW9kYWwtb3ZlcmxheVwiKS5yZW1vdmUoKTtcblxuICAgICAgICAkKFwiYm9keVwiKS5jc3MoIFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIgKTtcbiAgICAgICAgaWYgKG9wdGlvbnMudHJhbnNpdGlvblN0eWxlKSB7XG4gICAgICAgICAgICAkbW9kYWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbiAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgTXNUcmFuc2l0aW9uICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgT1RyYW5zaXRpb24gICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgICAgICA6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybSAgICAgICAgICAgOiAnc2NhbGUoMC43KScsXG4gICAgICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6ICcwJyxcbiAgICAgICAgICAgICAgICB0b3AgICAgICAgICAgICAgICAgIDogJzMwJSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG1vZGFsLmNzcygge1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgICAgICAgICAgOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5ICAgICAgICAgICAgIDogJzAnLFxuICAgICAgICAgICAgICAgIHRvcCAgICAgICAgICAgICAgICAgOiAnMzAlJ1xuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbiQuZm4uZXh0ZW5kKHtcbiAgICBjYWxsTW9kYWw6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgJG92ZXJsYXlBcHBlbmQgPSAkKCc8ZGl2IGNsYXNzPVwibW9kYWwtb3ZlcmxheVwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLmFwcGVuZCgkb3ZlcmxheUFwcGVuZCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbW9kYWxJRCA9ICQodGhpcykuYXR0cihcImhyZWZcIikgfHwgJyMnICsgJCh0aGlzKS5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICAgICAkKG1vZGFsSUQpLm9wZW5Nb2RhbChvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICQoJy5tb2RhbC1vdmVybGF5JykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAkKG1vZGFsSUQpLmNsb3NlTW9kYWwob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IFxuICAgIH1cbn0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgb3BlbkRyb3Bkb3duOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cbiAgICAgICAgdmFyIGRyb3Bkb3duSUQgPSB0aGlzLnNlbGVjdG9yO1xuICAgICAgICAkb3ZlcmxheSA9ICQoJy5tb2RhbC1vdmVybGF5Jyk7XG4gICAgICAgICRkcm9wID0gJChkcm9wZG93bklEKTtcblxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBrZXlib2FyZCAgICAgICAgOiB0cnVlLFxuICAgICAgICAgICAgYWxpZ25tZW50ICAgICAgIDogJ2xlZnQnLFxuICAgICAgICAgICAgZHVyYXRpb25JbiAgICAgIDogMC40MDAsXG4gICAgICAgICAgICBkdXJhdGlvbk91dCAgICAgOiAwLjMwMFxuICAgICAgICB9O1xuXG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7ICBcbiAgICAgICAgJGRyb3AuY3NzKHtcbiAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICBNb3pUcmFuc2l0aW9uICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgTXNUcmFuc2l0aW9uICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICB0cmFuc2l0aW9uICAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgJ3RleHQtYWxpZ24nICAgICAgICA6IG9wdGlvbnMuYWxpZ25tZW50LFxuICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgICAgICA6ICd2aXNpYmxlJyxcbiAgICAgICAgICAgIG9wYWNpdHkgICAgICAgICAgICAgOiAnMScsXG4gICAgICAgICAgICB6SW5kZXggICAgICAgICAgICAgIDogJzEnLFxuICAgICAgICAgICAgdG9wICAgICAgICAgICAgICAgICA6ICcwJ1xuICAgICAgICB9KTtcblxuICAgICAgICAkZHJvcC5maW5kKFwiLm1vZGFsLWNsb3NlXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJGRyb3AuY2xvc2VNb2RhbChvcHRpb25zKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMua2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgeyBcbiAgICAgICAgICAgICAgICAgICAgJGRyb3AuY2xvc2VEcm9wRG93bihvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgY2xvc2VEcm9wRG93bjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAkZHJvcC5jc3MoIHtcbiAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICBNc1RyYW5zaXRpb24gICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbk91dCArICdzJyxcbiAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICB2aXNpYmlsaXR5ICAgICAgICAgIDogJ2hpZGRlbicsXG4gICAgICAgICAgICBvcGFjaXR5ICAgICAgICAgICAgIDogJzAnLFxuICAgICAgICAgICAgekluZGV4ICAgICAgICAgICAgICA6ICctMScsXG4gICAgICAgICAgICB0b3AgICAgICAgICAgICAgICAgIDogJzQwcHgnXG4gICAgICAgIH0pO1xuXG4gICAgfVxufSk7XG5cbiQuZm4uZXh0ZW5kKHtcbiAgICBkcm9wZG93bjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3Bkb3duSUQgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAgICAgICAgICAgaWYoJChkcm9wZG93bklEKS5oYXNDbGFzcygnZHJvcGRvd25fb3BlbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZHJvcGRvd25JRCkuY2xvc2VEcm9wRG93bihvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgJChkcm9wZG93bklEKS5yZW1vdmVDbGFzcygnZHJvcGRvd25fb3BlbicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoZHJvcGRvd25JRCkuYWRkQ2xhc3MoJ2Ryb3Bkb3duX29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgJChkcm9wZG93bklEKS5vcGVuRHJvcGRvd24ob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyBcbiAgICB9XG59KTtcbn0pO1xuXG4iLCIvL0RFQlVHXG5jb25zb2xlLmxvZygnTW9kYWwgKHYwLjEuMSknKTtcblxuLy9Nb2RhbFxuZnVuY3Rpb24gTW9kYWwobW9kZWxJRCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5tb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGVsSUQpO1xuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG5cbiAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9ICcjMDAwJztcbiAgICB0aGlzLm9wYWNpdHlPdmVybGF5ICA9IDAuNjsgXG4gICAgdGhpcy50cmFuc2l0aW9uU3R5bGUgPSB0cnVlO1xuICAgIHRoaXMua2V5Ym9hcmQgICAgICAgID0gdHJ1ZTtcbiAgICB0aGlzLmR1cmF0aW9uSW4gICAgICA9IDAuNDc3O1xuICAgIHRoaXMuZHVyYXRpb25PdXQgICAgID0gMC4xNzc7XG5cbiAgICAvL2NvbnN0cnVjdCBPYmplY3RcbiAgICB2YXIgYnV0dG9ucyA9IHRoaXMubW9kYWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtY2xvc2UnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGJ0bl9jbG9zZSA9IGJ1dHRvbnNbaV07XG4gICAgICAgIGJ0bl9jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBfc2VsZi5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9zZXQgYmFja2dyb3VuZCBjb2xvclxuICAgICAgICB0aGlzLm1vZGFsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICB9O1xuICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMubW9kYWwuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgIH07XG5cblxuXG59O1xuXG4vL1NIT1cgTU9EQUxcbiEgZnVuY3Rpb24oKXtcblxuICAgIHZhciBtZW1vcnlfbW9kYWxzID0gW107XG4gICAgXG4gICAgdmFyIGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3N0ZXdlZC1tb2RhbF0nKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBlbGVtID0gZWxlbXNbaV07XG4gICAgICAgIHZhciBtb2RhbElEID0gZWxlbS5nZXRBdHRyaWJ1dGUoJ3N0ZXdlZC1tb2RhbCcpO1xuICAgICAgICBtZW1vcnlfbW9kYWxzW21vZGFsSURdID0gbmV3IE1vZGFsKG1vZGFsSUQpO1xuICAgICAgICBcbiAgICAgICAgLy9lbGVtZW50IGNsaWNrXG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRfbW9kYWwgPSB0aGlzLmdldEF0dHJpYnV0ZSgnc3Rld2VkLW1vZGFsJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBtb2RhbCA9IG1lbW9yeV9tb2RhbHNbY3VycmVudF9tb2RhbF07XG4gICAgICAgICAgICBpZihtb2RhbC5pc09wZW4pe1xuICAgICAgICAgICAgICAgIG1vZGFsLmhpZGUoKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIG1vZGFsLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vbmV3IE1vZGFsKCkuc2hvdygpOyBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vZWxlbWVudCBmaW5kIGNsYXNzIG1vZGFsLWNsb3NlXG4gICAgICAgIHZhciBjbG9zZUJ0biA9IGVsZW0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlbGVtLmdldEF0dHJpYnV0ZSgnc3Rld2VkLW1vZGFsJykpO1xuXG5cbiAgICB9XG59KCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
