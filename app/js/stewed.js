"use strict";function Modal(t){var o=this;if(console.log(t),this.modal=document.getElementById(t),this.isOpen=!1,null!==this.modal)for(var n=this.modal.getElementsByClassName("modal-close"),i=0;i<n.length;i++){var a=n[i];a.addEventListener("click",function(){o.hide()})}this.show=function(){null!==this.modal&&(this.modal.classList.add("modal--visible"),this.isOpen=!0)},this.hide=function(){null!==this.modal&&(this.modal.classList.remove("modal--visible"),this.isOpen=!1)}}$(function(){$(document).on("change",".file-path",function(){var t=$(".file-path > input[type=text]"),o=$(".upload").val();t.val(o),t.addClass("valid")})}),$(function(){$.fn.extend({showTab:function(t){$(".tabs").find(".active").removeClass("active"),$(".tabs").find("a[href$="+t+"]").addClass("active"),$("body").find(".tab-section").css({visibility:"hidden",display:"none"}),$(t).css({visibility:"visible",display:"block"})}}),$.fn.extend({tabs:function(){var t=$(".tabs li .active").attr("href")||"#"+$(this).data("target");$tab=$(t),$tab.css({visibility:"visible",display:"block"}),$(document).on("keyup",function(t,o){if(t.preventDefault(),37===t.keyCode||38===t.keyCode){var n=$tab.prev().attr("id");"undefined"!=typeof n&&($tab.showTab("#"+n),$tab=$("#"+n))}if(39===t.keyCode||40===t.keyCode){var i=$tab.next().attr("id");"undefined"!=typeof i&&($tab.showTab("#"+i),$tab=$("#"+i))}}),$(this).click(function(t){t.preventDefault();var o=$(this).attr("href")||"#"+$(this).data("target");$tab=$(o),$tab.showTab(o)})}}),$.fn.extend({openModal:function(t){$("body").css("overflow","hidden");var o=this.selector;$overlay=$(".modal-overlay"),$modal=$(o);var n={backgroundColor:"#000",opacityOverlay:.6,transitionStyle:!0,keyboard:!0,durationIn:.477,durationOut:.177};t=$.extend(n,t),$("body").find(".modal-overlay").css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s",background:t.backgroundColor,opacity:t.opacityOverlay}),t.transitionStyle?$modal.css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s",visibility:"visible",transform:"scale(1)",opacity:"1",top:"10%"}):$modal.css({visibility:"visible",transform:"scale(1)",opacity:"1",top:"10%"}),$modal.find(".modal-close").on("click",function(o){o.preventDefault(),$modal.closeModal(t)}),t.keyboard&&$(document).on("keyup",function(o){27===o.keyCode&&$modal.closeModal(t)})}}),$.fn.extend({closeModal:function(t){$overlay.removeClass("state-show"),$(".modal-overlay").remove(),$("body").css("overflow","auto"),t.transitionStyle?$modal.css({WebkitTransition:"all "+t.durationOut+"s",MozTransition:"all "+t.durationOut+"s",MsTransition:"all "+t.durationOut+"s",OTransition:"all "+t.durationOut+"s",transition:"all "+t.durationOut+"s",visibility:"hidden",transform:"scale(0.7)",opacity:"0",top:"30%"}):$modal.css({visibility:"hidden",opacity:"0",top:"30%"})}}),$.fn.extend({callModal:function(t){return this.each(function(){$(this).click(function(o){$overlayAppend=$('<div class="modal-overlay"></div>'),$("body").append($overlayAppend);var n=$(this).attr("href")||"#"+$(this).data("target");$(n).openModal(t),$(".modal-overlay").click(function(o){$(n).closeModal(t)})})})}}),$.fn.extend({openDropdown:function(t){var o=this.selector;$overlay=$(".modal-overlay"),$drop=$(o);var n={keyboard:!0,alignment:"left",durationIn:.4,durationOut:.3};t=$.extend(n,t),$drop.css({WebkitTransition:"all "+t.durationIn+"s",MozTransition:"all "+t.durationIn+"s",MsTransition:"all "+t.durationIn+"s",OTransition:"all "+t.durationIn+"s",transition:"all "+t.durationIn+"s","text-align":t.alignment,visibility:"visible",opacity:"1",zIndex:"1",top:"0"}),$drop.find(".modal-close").on("click",function(o){o.preventDefault(),$drop.closeModal(t)}),t.keyboard&&$(document).on("keyup",function(o){27===o.keyCode&&$drop.closeDropDown(t)})}}),$.fn.extend({closeDropDown:function(t){$drop.css({WebkitTransition:"all "+t.durationOut+"s",MozTransition:"all "+t.durationOut+"s",MsTransition:"all "+t.durationOut+"s",OTransition:"all "+t.durationOut+"s",transition:"all "+t.durationOut+"s",visibility:"hidden",opacity:"0",zIndex:"-1",top:"40px"})}}),$.fn.extend({dropdown:function(t){return this.each(function(){$(this).click(function(o){var n=$(this).attr("href")||"#"+$(this).data("target");$(n).hasClass("dropdown_open")?($(n).closeDropDown(t),$(n).removeClass("dropdown_open")):($(n).addClass("dropdown_open"),$(n).openDropdown(t))})})}})}),console.log("Modal (v0.1.12)"),!function(){for(var t=[],o=document.querySelectorAll("[stewed-modal]"),n=0;n<o.length;n++){var i=o[n],a=i.getAttribute("stewed-modal");t[a]=new Modal(a),i.addEventListener("click",function(){var o=this.getAttribute("stewed-modal"),n=t[o];n.isOpen?n.hide():n.show()})}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0ZXdlZC5qcyIsIm1vZGFsL21vZGFsLmpzIl0sIm5hbWVzIjpbIk1vZGFsIiwibW9kYWxJRCIsIl9zZWxmIiwidGhpcyIsImNvbnNvbGUiLCJsb2ciLCJtb2RhbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpc09wZW4iLCJjbG9zZUJ1dHRvbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaSIsImxlbmd0aCIsImJ0bl9jbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoaWRlIiwic2hvdyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIiQiLCJvbiIsImlucHV0X2ZpbGUiLCJ1cGxvYWRfZmlsZSIsInZhbCIsImFkZENsYXNzIiwiZm4iLCJleHRlbmQiLCJzaG93VGFiIiwidGFiSUQiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJjc3MiLCJ2aXNpYmlsaXR5IiwiZGlzcGxheSIsInRhYnMiLCJhdHRyIiwiZGF0YSIsIiR0YWIiLCJlIiwicHJldmVudERlZmF1bHQiLCJrZXlDb2RlIiwiUFJFViIsInByZXYiLCJORVhUIiwibmV4dCIsImNsaWNrIiwib3Blbk1vZGFsIiwib3B0aW9ucyIsInNlbGVjdG9yIiwiJG92ZXJsYXkiLCIkbW9kYWwiLCJkZWZhdWx0cyIsImJhY2tncm91bmRDb2xvciIsIm9wYWNpdHlPdmVybGF5IiwidHJhbnNpdGlvblN0eWxlIiwia2V5Ym9hcmQiLCJkdXJhdGlvbkluIiwiZHVyYXRpb25PdXQiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk1zVHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsImJhY2tncm91bmQiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwidG9wIiwiZXZlbnQiLCJjbG9zZU1vZGFsIiwiY2FsbE1vZGFsIiwiZWFjaCIsIiRvdmVybGF5QXBwZW5kIiwiYXBwZW5kIiwib3BlbkRyb3Bkb3duIiwiZHJvcGRvd25JRCIsIiRkcm9wIiwiYWxpZ25tZW50IiwidGV4dC1hbGlnbiIsInpJbmRleCIsImNsb3NlRHJvcERvd24iLCJkcm9wZG93biIsImhhc0NsYXNzIiwibWVtb3J5X21vZGFscyIsImVsZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW0iLCJnZXRBdHRyaWJ1dGUiLCJjdXJyZW50X21vZGFsIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ0lBLFNBQUFBLE9BQUFDLEdBQ0EsR0FBQUMsR0FBQUMsSUFRQSxJQVBBQyxRQUFBQyxJQUFBSixHQUNBRSxLQUFBRyxNQUFBQyxTQUFBQyxlQUFBUCxHQUNBRSxLQUFBTSxRQUFBLEVBS0EsT0FBQU4sS0FBQUcsTUFHQSxJQUFBLEdBREFJLEdBQUFQLEtBQUFHLE1BQUFLLHVCQUFBLGVBQ0FDLEVBQUEsRUFBQUEsRUFBQUYsRUFBQUcsT0FBQUQsSUFBQSxDQUNBLEdBQUFFLEdBQUFKLEVBQUFFLEVBQ0FFLEdBQUFDLGlCQUFBLFFBQUEsV0FDQWIsRUFBQWMsU0FVQWIsS0FBQWMsS0FBQSxXQUNBLE9BQUFkLEtBQUFHLFFBQ0FILEtBQUFHLE1BQUFZLFVBQUFDLElBQUEsa0JBQ0FoQixLQUFBTSxRQUFBLElBR0FOLEtBQUFhLEtBQUEsV0FDQSxPQUFBYixLQUFBRyxRQUNBSCxLQUFBRyxNQUFBWSxVQUFBRSxPQUFBLGtCQUNBakIsS0FBQU0sUUFBQSxJRHBDQVksRUFBQSxXQUdBQSxFQUFBZCxVQUFBZSxHQUFBLFNBQUEsYUFBQSxXQUNBLEdBQUFDLEdBQUFGLEVBQUEsaUNBQ0FHLEVBQUFILEVBQUEsV0FBQUksS0FDQUYsR0FBQUUsSUFBQUQsR0FDQUQsRUFBQUcsU0FBQSxhQUtBTCxFQUFBLFdBQ0FBLEVBQUFNLEdBQUFDLFFBQ0FDLFFBQUEsU0FBQUMsR0FFQVQsRUFBQSxTQUFBVSxLQUFBLFdBQUFDLFlBQUEsVUFDQVgsRUFBQSxTQUFBVSxLQUFBLFdBQUFELEVBQUEsS0FBQUosU0FBQSxVQUVBTCxFQUFBLFFBQUFVLEtBQUEsZ0JBQUFFLEtBQ0FDLFdBQUEsU0FDQUMsUUFBQSxTQUdBZCxFQUFBUyxHQUFBRyxL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LE9BRUFWLEVBQUFXIiwiZmlsZSI6InN0ZXdlZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiXG5cbiQoZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqIFVwbG9hZCB0aGUgZmlsZSAqKi9cbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy5maWxlLXBhdGgnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbnB1dF9maWxlID0gJCgnLmZpbGUtcGF0aCA+IGlucHV0W3R5cGU9dGV4dF0nKTtcbiAgICAgICAgdmFyIHVwbG9hZF9maWxlID0gJCgnLnVwbG9hZCcpLnZhbCgpO1xuICAgICAgICBpbnB1dF9maWxlLnZhbCh1cGxvYWRfZmlsZSk7XG4gICAgICAgIGlucHV0X2ZpbGUuYWRkQ2xhc3MoJ3ZhbGlkJylcbiAgICB9KTtcblxufSk7XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgc2hvd1RhYjogZnVuY3Rpb24odGFiSUQpIHtcblxuICAgICAgICAgICAgJCggJy50YWJzJyApLmZpbmQoICcuYWN0aXZlJyApLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xuICAgICAgICAgICAgJCggJy50YWJzJyApLmZpbmQoICdhW2hyZWYkPScgKyB0YWJJRCArICddJyApLmFkZENsYXNzKCAnYWN0aXZlJyApO1xuXG4gICAgICAgICAgICAkKCAnYm9keScgKS5maW5kKCAnLnRhYi1zZWN0aW9uJyApLmNzcyh7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgOiAnaGlkZGVuJywgXG4gICAgICAgICAgICAgICAgZGlzcGxheSAgICAgICAgOiAnbm9uZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCB0YWJJRCApLmNzcyh7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgOiAndmlzaWJsZScsIFxuICAgICAgICAgICAgICAgIGRpc3BsYXkgICAgICAgIDogJ2Jsb2NrJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgJC5mbi5leHRlbmQoe1xuICAgICAgICB0YWJzOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyIHRhYklEID0gJChcIi50YWJzIGxpIC5hY3RpdmVcIikuYXR0cihcImhyZWZcIikgfHwgJyMnICsgJCh0aGlzKS5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICR0YWIgPSAkKHRhYklEKTtcbiAgICAgICAgICAgICR0YWIuY3NzKHtcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5ICAgICA6ICd2aXNpYmxlJywgXG4gICAgICAgICAgICAgICAgZGlzcGxheSAgICAgICAgOiAnYmxvY2snXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgZnVuY3Rpb24oZSwgdGFiSUQpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzcgfHwgZS5rZXlDb2RlID09PSAzOCkgeyBcbiAgICAgICAgICAgICAgICAgICAgdmFyIFBSRVYgPSAkdGFiLnByZXYoKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgUFJFViAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRhYi5zaG93VGFiKCcjJyArIFBSRVYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRhYiA9ICQoJyMnICsgUFJFVik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzkgfHwgZS5rZXlDb2RlID09PSA0MCkgeyBcbiAgICAgICAgICAgICAgICAgICAgdmFyIE5FWFQgPSAkdGFiLm5leHQoKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgTkVYVCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRhYi5zaG93VGFiKCcjJyArIE5FWFQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRhYiA9ICQoJyMnICsgTkVYVCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciB0YWJJRCA9ICQodGhpcykuYXR0cihcImhyZWZcIikgfHwgJyMnICsgJCh0aGlzKS5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICAgICAkdGFiID0gJCh0YWJJRCk7XG4gICAgICAgICAgICAgICAgJHRhYi5zaG93VGFiKHRhYklEKTtcblxuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgfSk7XG5cbiQuZm4uZXh0ZW5kKHtcbiAgICBvcGVuTW9kYWw6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgICAgICAkKFwiYm9keVwiKS5jc3MoIFwib3ZlcmZsb3dcIiwgXCJoaWRkZW5cIiApO1xuICAgICAgICB2YXIgbW9kYWxJRCA9IHRoaXMuc2VsZWN0b3I7XG5cbiAgICAgICAgJG92ZXJsYXkgPSAkKCcubW9kYWwtb3ZlcmxheScpO1xuICAgICAgICAkbW9kYWwgPSAkKG1vZGFsSUQpO1xuXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA6ICcjMDAwJyxcbiAgICAgICAgICAgIG9wYWNpdHlPdmVybGF5ICA6IDAuNiwgXG4gICAgICAgICAgICB0cmFuc2l0aW9uU3R5bGUgOiB0cnVlLFxuICAgICAgICAgICAga2V5Ym9hcmQgICAgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uSW4gICAgICA6IDAuNDc3LFxuICAgICAgICAgICAgZHVyYXRpb25PdXQgICAgIDogMC4xNzdcbiAgICAgICAgfTtcblxuICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpOyAgXG5cbiAgICAgICAgJChcImJvZHlcIikuZmluZCgnLm1vZGFsLW92ZXJsYXknKS5jc3MoeyBcbiAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICBNb3pUcmFuc2l0aW9uICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgTXNUcmFuc2l0aW9uICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICB0cmFuc2l0aW9uICAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgYmFja2dyb3VuZCAgICAgICAgICA6IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6IG9wdGlvbnMub3BhY2l0eU92ZXJsYXkgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnRyYW5zaXRpb25TdHlsZSkge1xuICAgICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbiAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgICAgICBNb3pUcmFuc2l0aW9uICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgICAgIE1zVHJhbnNpdGlvbiAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICAgICAgT1RyYW5zaXRpb24gICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uICAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgICAgICAgICAgOiAndmlzaWJsZScsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtICAgICAgICAgICA6ICdzY2FsZSgxKScsXG4gICAgICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6ICcxJyxcbiAgICAgICAgICAgICAgICB0b3AgICAgICAgICAgICAgICAgIDogJzEwJSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgICAgICA6ICd2aXNpYmxlJyxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gICAgICAgICAgIDogJ3NjYWxlKDEpJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5ICAgICAgICAgICAgIDogJzEnLFxuICAgICAgICAgICAgICAgIHRvcCAgICAgICAgICAgICAgICAgOiAnMTAlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAkbW9kYWwuZmluZChcIi5tb2RhbC1jbG9zZVwiKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICRtb2RhbC5jbG9zZU1vZGFsKG9wdGlvbnMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAob3B0aW9ucy5rZXlib2FyZCkge1xuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7IFxuICAgICAgICAgICAgICAgICAgICAkbW9kYWwuY2xvc2VNb2RhbChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgY2xvc2VNb2RhbDogZnVuY3Rpb24ob3B0aW9ucykge1xuXG4gICAgICAgICRvdmVybGF5LnJlbW92ZUNsYXNzKCdzdGF0ZS1zaG93Jyk7XG4gICAgICAgICQoXCIubW9kYWwtb3ZlcmxheVwiKS5yZW1vdmUoKTtcblxuICAgICAgICAkKFwiYm9keVwiKS5jc3MoIFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIgKTtcbiAgICAgICAgaWYgKG9wdGlvbnMudHJhbnNpdGlvblN0eWxlKSB7XG4gICAgICAgICAgICAkbW9kYWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbiAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgTXNUcmFuc2l0aW9uICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgT1RyYW5zaXRpb24gICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgICAgICA6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybSAgICAgICAgICAgOiAnc2NhbGUoMC43KScsXG4gICAgICAgICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICA6ICcwJyxcbiAgICAgICAgICAgICAgICB0b3AgICAgICAgICAgICAgICAgIDogJzMwJSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG1vZGFsLmNzcygge1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgICAgICAgICAgOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5ICAgICAgICAgICAgIDogJzAnLFxuICAgICAgICAgICAgICAgIHRvcCAgICAgICAgICAgICAgICAgOiAnMzAlJ1xuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbiQuZm4uZXh0ZW5kKHtcbiAgICBjYWxsTW9kYWw6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgJG92ZXJsYXlBcHBlbmQgPSAkKCc8ZGl2IGNsYXNzPVwibW9kYWwtb3ZlcmxheVwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLmFwcGVuZCgkb3ZlcmxheUFwcGVuZCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbW9kYWxJRCA9ICQodGhpcykuYXR0cihcImhyZWZcIikgfHwgJyMnICsgJCh0aGlzKS5kYXRhKCd0YXJnZXQnKTtcbiAgICAgICAgICAgICAgICAkKG1vZGFsSUQpLm9wZW5Nb2RhbChvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICQoJy5tb2RhbC1vdmVybGF5JykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAkKG1vZGFsSUQpLmNsb3NlTW9kYWwob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IFxuICAgIH1cbn0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgb3BlbkRyb3Bkb3duOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cbiAgICAgICAgdmFyIGRyb3Bkb3duSUQgPSB0aGlzLnNlbGVjdG9yO1xuICAgICAgICAkb3ZlcmxheSA9ICQoJy5tb2RhbC1vdmVybGF5Jyk7XG4gICAgICAgICRkcm9wID0gJChkcm9wZG93bklEKTtcblxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBrZXlib2FyZCAgICAgICAgOiB0cnVlLFxuICAgICAgICAgICAgYWxpZ25tZW50ICAgICAgIDogJ2xlZnQnLFxuICAgICAgICAgICAgZHVyYXRpb25JbiAgICAgIDogMC40MDAsXG4gICAgICAgICAgICBkdXJhdGlvbk91dCAgICAgOiAwLjMwMFxuICAgICAgICB9O1xuXG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7ICBcbiAgICAgICAgJGRyb3AuY3NzKHtcbiAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICBNb3pUcmFuc2l0aW9uICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgTXNUcmFuc2l0aW9uICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25JbiArICdzJyxcbiAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uSW4gKyAncycsXG4gICAgICAgICAgICB0cmFuc2l0aW9uICAgICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbkluICsgJ3MnLFxuICAgICAgICAgICAgJ3RleHQtYWxpZ24nICAgICAgICA6IG9wdGlvbnMuYWxpZ25tZW50LFxuICAgICAgICAgICAgdmlzaWJpbGl0eSAgICAgICAgICA6ICd2aXNpYmxlJyxcbiAgICAgICAgICAgIG9wYWNpdHkgICAgICAgICAgICAgOiAnMScsXG4gICAgICAgICAgICB6SW5kZXggICAgICAgICAgICAgIDogJzEnLFxuICAgICAgICAgICAgdG9wICAgICAgICAgICAgICAgICA6ICcwJ1xuICAgICAgICB9KTtcblxuICAgICAgICAkZHJvcC5maW5kKFwiLm1vZGFsLWNsb3NlXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJGRyb3AuY2xvc2VNb2RhbChvcHRpb25zKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMua2V5Ym9hcmQpIHtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgeyBcbiAgICAgICAgICAgICAgICAgICAgJGRyb3AuY2xvc2VEcm9wRG93bihvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4kLmZuLmV4dGVuZCh7XG4gICAgY2xvc2VEcm9wRG93bjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAkZHJvcC5jc3MoIHtcbiAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICBNc1RyYW5zaXRpb24gICAgICAgIDogJ2FsbCAnICsgb3B0aW9ucy5kdXJhdGlvbk91dCArICdzJyxcbiAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgICAgOiAnYWxsICcgKyBvcHRpb25zLmR1cmF0aW9uT3V0ICsgJ3MnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICAgICA6ICdhbGwgJyArIG9wdGlvbnMuZHVyYXRpb25PdXQgKyAncycsXG4gICAgICAgICAgICB2aXNpYmlsaXR5ICAgICAgICAgIDogJ2hpZGRlbicsXG4gICAgICAgICAgICBvcGFjaXR5ICAgICAgICAgICAgIDogJzAnLFxuICAgICAgICAgICAgekluZGV4ICAgICAgICAgICAgICA6ICctMScsXG4gICAgICAgICAgICB0b3AgICAgICAgICAgICAgICAgIDogJzQwcHgnXG4gICAgICAgIH0pO1xuXG4gICAgfVxufSk7XG5cbiQuZm4uZXh0ZW5kKHtcbiAgICBkcm9wZG93bjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyb3Bkb3duSUQgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAgICAgICAgICAgaWYoJChkcm9wZG93bklEKS5oYXNDbGFzcygnZHJvcGRvd25fb3BlbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZHJvcGRvd25JRCkuY2xvc2VEcm9wRG93bihvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgJChkcm9wZG93bklEKS5yZW1vdmVDbGFzcygnZHJvcGRvd25fb3BlbicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQoZHJvcGRvd25JRCkuYWRkQ2xhc3MoJ2Ryb3Bkb3duX29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgJChkcm9wZG93bklEKS5vcGVuRHJvcGRvd24ob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyBcbiAgICB9XG59KTtcbn0pO1xuXG4iLCIvL0RFQlVHXG5jb25zb2xlLmxvZygnTW9kYWwgKHYwLjEuMTIpJyk7XG5cbi8vTW9kYWxcbmZ1bmN0aW9uIE1vZGFsKG1vZGFsSUQpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIGNvbnNvbGUubG9nKG1vZGFsSUQpO1xuICAgIHRoaXMubW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElEKTtcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuXG4gICAgLy9Qcm9wZXJ0aWVzXG4gICAgXG4gICAgLy9Db25zdHJ1Y3RvclxuICAgIGlmKHRoaXMubW9kYWwgIT09IG51bGwpe1xuICAgICAgICAvL2NvbnN0cnVjdCBPYmplY3RcbiAgICAgICAgdmFyIGNsb3NlQnV0dG9ucyA9IHRoaXMubW9kYWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9kYWwtY2xvc2UnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9zZUJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBidG5fY2xvc2UgPSBjbG9zZUJ1dHRvbnNbaV07XG4gICAgICAgICAgICBidG5fY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9zZWxmLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogU2hvdyBDdXJyZW50IE1vZGFsXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXG4gICAgICovXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZih0aGlzLm1vZGFsICE9PSBudWxsKXtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy5tb2RhbCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuXG5cbn07XG5cbi8vU0hPVyBNT0RBTFxuISBmdW5jdGlvbigpe1xuXG4gICAgdmFyIG1lbW9yeV9tb2RhbHMgPSBbXTtcbiAgICBcbiAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3Rld2VkLW1vZGFsXScpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGVsZW0gPSBlbGVtc1tpXTtcbiAgICAgICAgdmFyIG1vZGFsSUQgPSBlbGVtLmdldEF0dHJpYnV0ZSgnc3Rld2VkLW1vZGFsJyk7XG4gICAgICAgIG1lbW9yeV9tb2RhbHNbbW9kYWxJRF0gPSBuZXcgTW9kYWwobW9kYWxJRCk7XG4gICAgICAgIFxuICAgICAgICAvL2VsZW1lbnQgY2xpY2tcbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgY3VycmVudF9tb2RhbCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdzdGV3ZWQtbW9kYWwnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIG1vZGFsID0gbWVtb3J5X21vZGFsc1tjdXJyZW50X21vZGFsXTtcbiAgICAgICAgICAgIGlmKG1vZGFsLmlzT3Blbil7XG4gICAgICAgICAgICAgICAgbW9kYWwuaGlkZSgpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9uZXcgTW9kYWwoKS5zaG93KCk7IFxuICAgICAgICB9KTtcbiAgICAgICAgLy9lbGVtZW50IGZpbmQgY2xhc3MgbW9kYWwtY2xvc2VcbiAgICAgICAgLy92YXIgY2xvc2VCdG4gPSBlbGVtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbS5nZXRBdHRyaWJ1dGUoJ3N0ZXdlZC1tb2RhbCcpKTtcblxuXG4gICAgfVxufSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
