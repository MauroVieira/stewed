"use strict";function Modal(e){var t=this;this.modal=document.getElementById(e),this.isOpen=!1;if(this.backgroundColor="#000",null!==this.modal){for(var i=this.modal.getElementsByClassName("modal-close"),s=0;s<i.length;s++){var a=i[s];a.addEventListener("click",function(){t.hide()})}this.modal.addEventListener("transitionend",function(){this.classList.contains("modal--animatable")&&this.classList.remove("modal--animatable")}),document.addEventListener("keyup",function(e){27===e.keyCode&&t.isOpen&&t.hide()})}this.show=function(){null!==this.modal&&(this.modal.classList.add("modal--visible"),this.isOpen=!0)},this.hide=function(){null!==this.modal&&(this.modal.classList.remove("modal--visible"),this.modal.classList.add("modal--animatable"),this.isOpen=!1)}}function Snackbar(e){var t=this;this.snackbar=document.getElementById(e),this.isOpen=!1;if(null!==this.snackbar){for(var i=this.snackbar.getElementsByClassName("snackbar-close"),s=0;s<i.length;s++){var a=i[s];a.addEventListener("click",function(){t.hide()})}this.snackbar.addEventListener("transitionend",function(){this.classList.contains("snackbar--animatable")&&this.classList.remove("snackbar--animatable")}),document.addEventListener("keyup",function(e){27===e.keyCode&&t.isOpen&&t.hide()})}this.show=function(){null!==this.snackbar&&(this.snackbar.classList.add("snackbar--visible"),this.isOpen=!0)},this.hide=function(){null!==this.snackbar&&(this.snackbar.classList.remove("snackbar--visible"),this.snackbar.classList.add("snackbar--animatable"),this.isOpen=!1)}}var d=new Date,form=function(){const e=document.querySelectorAll('[stewed-validate="true"]');for(var t=document.getElementsByClassName("textfield__input"),i=0;i<t.length;i++)if(!t[i].disabled){var s=t[i];s.parentNode.className="textfield",s.addEventListener("input",function(){if(e.length){const t=""==this.min?"tel"==this.type?9:2:this.min,i=""==this.max?"tel"==this.type?13:Number.MAX_SAFE_INTEGER:this.max,s=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;"select-one"==this.type?""!=this.value?this.parentNode.className="textfield textfield--valid":this.parentNode.className="textfield textfield--invalid":"textarea"==this.type?this.value.length>1?this.parentNode.className="textfield textfield--valid":0==this.value.length?this.parentNode.className="textfield":this.parentNode.className="textfield textfield--invalid":this.value.length>=t&&this.value.length<=i?"email"==this.type?s.test(this.value)?this.parentNode.className="textfield textfield--valid":this.parentNode.className="textfield textfield--invalid":this.parentNode.className="textfield textfield--valid":0==this.value.length?this.parentNode.className="textfield":this.parentNode.className="textfield textfield--invalid"}else this.value.length>1?this.parentNode.className="textfield textfield--filled":this.parentNode.className="textfield"})}};!function(){form()}(),console.log("Modal (v0.1.2)"),!function(){for(var e=[],t=document.querySelectorAll("[stewed-modal]"),i=0;i<t.length;i++){var s=t[i],a=s.getAttribute("stewed-modal");e[a]=new Modal(a),s.addEventListener("click",function(){var t=this.getAttribute("stewed-modal"),i=e[t];i.isOpen?i.hide():i.show()})}}(),console.log("Snackbar (v0.1.2)"),!function(){for(var e=[],t=document.querySelectorAll("[stewed-snackbar]"),i=0;i<t.length;i++){var s=t[i],a=s.getAttribute("stewed-snackbar");e[a]=new Snackbar(a),s.addEventListener("click",function(){var t=this.getAttribute("stewed-snackbar"),i=e[t];i.isOpen?i.hide():i.show()})}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3Bkb3duL2Ryb3Bkb3duLmpzIiwibW9kYWwvbW9kYWwuanMiLCJzbmFja2Jhci9zbmFja2Jhci5qcyIsImZvcm0vZm9ybS5qcyJdLCJuYW1lcyI6WyJNb2RhbCIsIm1vZGFsSUQiLCJfc2VsZiIsInRoaXMiLCJtb2RhbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpc09wZW4iLCJiYWNrZ3JvdW5kQ29sb3IiLCJjbG9zZUJ1dHRvbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaSIsImxlbmd0aCIsImJ0bl9jbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoaWRlIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJlIiwia2V5Q29kZSIsInNob3ciLCJhZGQiLCJTbmFja2JhciIsInNuYWNrYmFySUQiLCJzbmFja2JhciIsImQiLCJEYXRlIiwiZm9ybSIsIlZBTElEQVRFIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0cyIsImRpc2FibGVkIiwiaW5wdXQiLCJwYXJlbnROb2RlIiwiY2xhc3NOYW1lIiwiTUlOIiwibWluIiwidHlwZSIsIk1BWCIsIm1heCIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJFTUFJTCIsInZhbHVlIiwidGVzdCIsImNvbnNvbGUiLCJsb2ciLCJtZW1vcnlfbW9kYWxzIiwiZWxlbXMiLCJlbGVtIiwiZ2V0QXR0cmlidXRlIiwiY3VycmVudF9tb2RhbCIsIm1lbW9yeV9zbmFja2JhcnMiLCJjdXJyZW50X3NuYWNrYmFyIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ0lBLFNBQUFBLE9BQUFDLEdBQ0EsR0FBQUMsR0FBQUMsSUFDQUEsTUFBQUMsTUFBQUMsU0FBQUMsZUFBQUwsR0FDQUUsS0FBQUksUUFBQSxDQU9BLElBSEFKLEtBQUFLLGdCQUFBLE9BR0EsT0FBQUwsS0FBQUMsTUFBQSxDQUdBLElBQUEsR0FEQUssR0FBQU4sS0FBQUMsTUFBQU0sdUJBQUEsZUFDQUMsRUFBQSxFQUFBQSxFQUFBRixF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dFwiXG5cbiIsIi8vREVCVUdcbmNvbnNvbGUubG9nKCdNb2RhbCAodjAuMS4yKScpO1xuXG4vL01vZGFsXG5mdW5jdGlvbiBNb2RhbChtb2RhbElEKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJRCk7XG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICB2YXIgbnVtID0gMTtcblxuICAgIC8vUHJvcGVydGllc1xuICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gJyMwMDAnO1xuICAgIFxuICAgIC8vQ29uc3RydWN0b3JcbiAgICBpZih0aGlzLm1vZGFsICE9PSBudWxsKXtcbiAgICAgICAgLy9jb25zdHJ1Y3QgT2JqZWN0XG4gICAgICAgIHZhciBjbG9zZUJ1dHRvbnMgPSB0aGlzLm1vZGFsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21vZGFsLWNsb3NlJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvc2VCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnRuX2Nsb3NlID0gY2xvc2VCdXR0b25zW2ldO1xuICAgICAgICAgICAgYnRuX2Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsLS1hbmltYXRhYmxlJykpe1xuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLWFuaW1hdGFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vYWRkIGtleSBjbG9zZSBldmVudFxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PT0gMjcgJiYgX3NlbGYuaXNPcGVuKXtcbiAgICAgICAgICAgICAgICBfc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgQ3VycmVudCBNb2RhbFxuICAgICAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxuICAgICAqL1xuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYodGhpcy5tb2RhbCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHRoaXMubW9kYWwgIT09IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tdmlzaWJsZScpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbC0tYW5pbWF0YWJsZScpO1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbn07XG5cbi8vU0hPVyBNT0RBTFxuISBmdW5jdGlvbigpe1xuXG4gICAgdmFyIG1lbW9yeV9tb2RhbHMgPSBbXTtcbiAgICBcbiAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3Rld2VkLW1vZGFsXScpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGVsZW0gPSBlbGVtc1tpXTtcbiAgICAgICAgdmFyIG1vZGFsSUQgPSBlbGVtLmdldEF0dHJpYnV0ZSgnc3Rld2VkLW1vZGFsJyk7XG4gICAgICAgIG1lbW9yeV9tb2RhbHNbbW9kYWxJRF0gPSBuZXcgTW9kYWwobW9kYWxJRCk7XG4gICAgICAgIFxuICAgICAgICAvL2VsZW1lbnQgY2xpY2tcbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgY3VycmVudF9tb2RhbCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdzdGV3ZWQtbW9kYWwnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIG1vZGFsID0gbWVtb3J5X21vZGFsc1tjdXJyZW50X21vZGFsXTtcbiAgICAgICAgICAgIGlmKG1vZGFsLmlzT3Blbil7XG4gICAgICAgICAgICAgICAgbW9kYWwuaGlkZSgpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KCk7IiwiLy9ERUJVR1xuY29uc29sZS5sb2coJ1NuYWNrYmFyICh2MC4xLjIpJyk7XG5cbi8vc25hY2tiYXJcbmZ1bmN0aW9uIFNuYWNrYmFyKHNuYWNrYmFySUQpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHRoaXMuc25hY2tiYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzbmFja2JhcklEKTtcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgIHZhciBudW0gPSAxO1xuXG4gICAgLy9Db25zdHJ1Y3RvclxuICAgIGlmKHRoaXMuc25hY2tiYXIgIT09IG51bGwpe1xuICAgICAgICAvL2NvbnN0cnVjdCBPYmplY3RcbiAgICAgICAgdmFyIGNsb3NlQnV0dG9ucyA9IHRoaXMuc25hY2tiYXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc25hY2tiYXItY2xvc2UnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbG9zZUJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBidG5fY2xvc2UgPSBjbG9zZUJ1dHRvbnNbaV07XG4gICAgICAgICAgICBidG5fY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9zZWxmLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNuYWNrYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZih0aGlzLmNsYXNzTGlzdC5jb250YWlucygnc25hY2tiYXItLWFuaW1hdGFibGUnKSl7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdzbmFja2Jhci0tYW5pbWF0YWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9hZGQga2V5IGNsb3NlIGV2ZW50XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYoZS5rZXlDb2RlID09PSAyNyAmJiBfc2VsZi5pc09wZW4pe1xuICAgICAgICAgICAgICAgIF9zZWxmLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBDdXJyZW50IFNuYWNrYmFyXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXG4gICAgICovXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZih0aGlzLnNuYWNrYmFyICE9PSBudWxsKXtcbiAgICAgICAgICAgIHRoaXMuc25hY2tiYXIuY2xhc3NMaXN0LmFkZCgnc25hY2tiYXItLXZpc2libGUnKTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy5zbmFja2JhciAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3NuYWNrYmFyLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLmNsYXNzTGlzdC5hZGQoJ3NuYWNrYmFyLS1hbmltYXRhYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxufTtcblxuLy9TSE9XIHNuYWNrYmFyXG4hIGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgbWVtb3J5X3NuYWNrYmFycyA9IFtdO1xuICAgIFxuICAgIHZhciBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tzdGV3ZWQtc25hY2tiYXJdJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZWxlbSA9IGVsZW1zW2ldO1xuICAgICAgICB2YXIgc25hY2tiYXJJRCA9IGVsZW0uZ2V0QXR0cmlidXRlKCdzdGV3ZWQtc25hY2tiYXInKTtcbiAgICAgICAgbWVtb3J5X3NuYWNrYmFyc1tzbmFja2JhcklEXSA9IG5ldyBTbmFja2JhcihzbmFja2JhcklEKTtcbiAgICAgICAgXG4gICAgICAgIC8vZWxlbWVudCBjbGlja1xuICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBjdXJyZW50X3NuYWNrYmFyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3N0ZXdlZC1zbmFja2JhcicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgc25hY2tiYXIgPSBtZW1vcnlfc25hY2tiYXJzW2N1cnJlbnRfc25hY2tiYXJdO1xuICAgICAgICAgICAgaWYoc25hY2tiYXIuaXNPcGVuKXtcbiAgICAgICAgICAgICAgICBzbmFja2Jhci5oaWRlKCk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzbmFja2Jhci5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0oKTsiLCJ2YXIgZCA9IG5ldyBEYXRlKCk7XG5cbi8vY29uc29sZS5sb2coJ0Zvcm0gJyArIGQudG9VVENTdHJpbmcoKSk7XG5cbnZhciBmb3JtID0gZnVuY3Rpb24gKCkge1xuXG4gICAgY29uc3QgVkFMSURBVEUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3Rld2VkLXZhbGlkYXRlPVwidHJ1ZVwiXScpO1xuICAgIHZhciBpbnB1dHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZXh0ZmllbGRfX2lucHV0Jyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIGlmICghIGlucHV0c1tpXS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRzW2ldO1xuICAgICAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkJztcblxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmIChWQUxJREFURS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgTUlOID0gKHRoaXMubWluID09ICcnKSA/ICgodGhpcy50eXBlID09ICd0ZWwnKSA/IDkgOiAyICkgOiB0aGlzLm1pbixcbiAgICAgICAgICAgICAgICAgICAgTUFYID0gKHRoaXMubWF4ID09ICcnKSA/ICgodGhpcy50eXBlID09ICd0ZWwnKSA/IDEzIDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgKSA6IHRoaXMubWF4LFxuICAgICAgICAgICAgICAgICAgICBFTUFJTCA9IC9eKFtcXHctXSsoPzpcXC5bXFx3LV0rKSopQCgoPzpbXFx3LV0rXFwuKSpcXHdbXFx3LV17MCw2Nn0pXFwuKFthLXpdezIsNn0oPzpcXC5bYS16XXsyfSk/KSQvaTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09ICdzZWxlY3Qtb25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0tdmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLWludmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSAndGV4dGFyZWEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS12YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0taW52YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICh0aGlzLnZhbHVlLmxlbmd0aCA+PSBNSU4gKSAmJiAodGhpcy52YWx1ZS5sZW5ndGggPD0gTUFYKSApICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PSAnZW1haWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChFTUFJTC50ZXN0KHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLXZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0taW52YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLXZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0taW52YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLWZpbGxlZCc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbiFmdW5jdGlvbigpe1xuICAgIGZvcm0oKTtcbn0oKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
