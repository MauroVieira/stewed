var Dropdown=function(t,e){"use strict";this.dropdown=t,this.id=document.getElementById(e),this.show=function(){if(this.id.classList.contains("dropdown--visible"))this.id.className+=" dropdown--animatable",this.id.classList.remove("dropdown--visible");else{var t=document.getElementsByClassName("dropdown--visible");t.length>0&&t[0].classList.remove("dropdown--visible"),this.id.className+=" dropdown--visible"}},this.id.addEventListener("transitionend",function(){this.classList.contains("dropdown--animatable")&&this.classList.remove("dropdown--animatable")})};!function(){"use strict";for(var t=document.querySelectorAll("[stewed-dropdown]"),e=0;e<t.length;e++){var i=t[e];i.addEventListener("click",function(){var t=this.getAttribute("stewed-dropdown"),e=new Dropdown(this,t);this.classList.contains("disabled")||e.show()})}}();var Form=function(){"use strict";const t=document.querySelectorAll('[stewed-validate="true"]');for(var e=document.getElementsByClassName("textfield__input"),i=0;i<e.length;i++)if(!e[i].disabled){var s=e[i];s.parentNode.className="textfield",s.addEventListener("input",function(){if(t.length){const e=""==this.min?"tel"==this.type?9:2:this.min,i=""==this.max?"tel"==this.type?13:Number.MAX_SAFE_INTEGER:this.max,s=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;"select-one"==this.type?""!=this.value?this.parentNode.className="textfield textfield--valid":this.parentNode.className="textfield textfield--invalid":"textarea"==this.type?this.value.length>1?this.parentNode.className="textfield textfield--valid":0==this.value.length?this.parentNode.className="textfield":this.parentNode.className="textfield textfield--invalid":this.value.length>=e&&this.value.length<=i?"email"==this.type?s.test(this.value)?this.parentNode.className="textfield textfield--valid":this.parentNode.className="textfield textfield--invalid":this.parentNode.className="textfield textfield--valid":0==this.value.length?this.parentNode.className="textfield":this.parentNode.className="textfield textfield--invalid"}else this.value.length>1?this.parentNode.className="textfield textfield--filled":this.parentNode.className="textfield"})}};!function(){"use strict";new Form}();var Modal=function(t){"use strict";var e=this;if(this.modal=document.getElementById(t),this.isOpen=!1,null!==this.modal){for(var i=this.modal.getElementsByClassName("modal-close"),s=0;s<i.length;s++){var n=i[s];n.addEventListener("click",function(){e.hide()})}this.modal.addEventListener("transitionend",function(){this.classList.contains("modal--animatable")&&this.classList.remove("modal--animatable")}),document.addEventListener("keyup",function(t){27===t.keyCode&&e.isOpen&&e.hide()})}this.show=function(){null!==this.modal&&(this.modal.classList.add("modal--visible"),this.isOpen=!0)},this.hide=function(){null!==this.modal&&(this.modal.classList.remove("modal--visible"),this.modal.classList.add("modal--animatable"),this.isOpen=!1)}};!function(){"use strict";for(var t=[],e=document.querySelectorAll("[stewed-modal]"),i=0;i<e.length;i++){var s=e[i],n=s.getAttribute("stewed-modal");t[n]=new Modal(n),s.addEventListener("click",function(){var e=this.getAttribute("stewed-modal"),i=t[e],s=document.querySelector(".modal");s.addEventListener("click",function(){i.hide()}),i.isOpen?i.hide():i.show()})}}();var SideNav=function(){"use strict";var t=document.querySelector(".js-menu-show"),e=document.querySelector(".js-menu-hide"),i=document.querySelector(".js-side-nav"),s=document.querySelector(".js-side-nav-container"),n=(document.querySelector(".js-side-nav-container"),!1),a=0,d=0;this.addEventListeners=function(){t&&t.addEventListener("click",this.showSideNav),e&&e.addEventListener("click",l),i&&i.addEventListener("click",l),s&&s.addEventListener("click",this.blockClicks),i&&(i.addEventListener("touchstart",this.onTouchStart),i.addEventListener("touchmove",this.onTouchMove),i.addEventListener("touchend",this.onTouchEnd))},this.blockClicks=function(t){t.stopPropagation()};var o=function(t){i.classList.remove("side-nav--animatable"),i.removeEventListener("transitionend",o)};this.showSideNav=function(){i.classList.add("side-nav--animatable"),i.classList.add("side-nav--visible"),document.getElementsByTagName("html")[0].style.overflow="hidden",i.addEventListener("transitionend",o)};var l=function(){i.classList.add("side-nav--animatable"),i.classList.remove("side-nav--visible"),document.getElementsByTagName("html")[0].style.overflow="",i.addEventListener("transitionend",o)},c=function(){if(n){requestAnimationFrame(function(){c()});const t=Math.min(0,d-a);s.style.transform="translateX("+t+"px)"}};this.onTouchStart=function(t){i.classList.contains("side-nav--visible")&&(a=t.touches[0].pageX,d=a,n=!0,requestAnimationFrame(function(){c()}))},this.onTouchMove=function(t){if(n){d=t.touches[0].pageX;const e=Math.min(0,d-a);e<0&&t.preventDefault()}},this.onTouchEnd=function(t){if(n){n=!1;const e=Math.min(0,d-a);s.style.transform="",e<0&&l()}}};!function(){"use strict";var t=new SideNav;t.addEventListeners()}();var snackbar=function(t){"use strict";var e=this;if(this.snackbar=document.getElementById(t),this.isOpen=!1,null!==this.snackbar){for(var i=this.snackbar.getElementsByClassName("snackbar-close"),s=0;s<i.length;s++){var n=i[s];n.addEventListener("click",function(){e.hide()})}this.snackbar.addEventListener("transitionend",function(){this.classList.contains("snackbar--animatable")&&this.classList.remove("snackbar--animatable")}),document.addEventListener("keyup",function(t){27===t.keyCode&&e.isOpen&&e.hide()})}this.show=function(){null!==this.snackbar&&(this.snackbar.classList.add("snackbar--visible"),this.isOpen=!0)},this.hide=function(){null!==this.snackbar&&(this.snackbar.classList.remove("snackbar--visible"),this.snackbar.classList.add("snackbar--animatable"),this.isOpen=!1)}};!function(){"use strict";for(var t=[],e=document.querySelectorAll("[stewed-snackbar]"),i=0;i<e.length;i++){var s=e[i],n=s.getAttribute("stewed-snackbar");t[n]=new snackbar(n),s.addEventListener("click",function(){var e=this.getAttribute("stewed-snackbar"),i=t[e],s=document.querySelector(".snackbar");s.addEventListener("click",function(){i.hide()}),i.isOpen?i.hide():i.show()})}}();var Tabs=function(t,e){"use strict";this.tab=t,this.id=document.getElementById(e),this.hide=function(){for(var t=this.tab.parentNode.children,e=this.id.parentNode.children,i=0;i<t.length;i++)t[i].classList.remove("tabs__item--active");for(var s=0;s<e.length;s++)e[s].classList.remove("tab-section--active")},this.show=function(){this.tab.classList.add("tabs__item--active"),this.id.classList.add("tab-section--active")}};!function(){"use strict";var t=document.getElementsByClassName("tabs__item");Array.from(t);for(var e=0;e<t.length;e++){var i=t[e];i.addEventListener("click",function(){var t=this.getAttribute("stewed-tab-id"),e=new Tabs(this,t);"false"!==t&&(this.classList.contains("disabled")||(e.hide(),e.show()))})}window.addEventListener("keypress",function(e){index<0?index=0:index>=t.length&&(index=t.length-1),console.log(index)})}();var toast=function(){"use strict"};!function(){"use strict";toast()}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3Bkb3duL2Ryb3Bkb3duLmpzIiwiZm9ybS9mb3JtLmpzIiwibW9kYWwvbW9kYWwuanMiLCJzaWRlbmF2L3NpZGVuYXYuanMiLCJzbmFja2Jhci9zbmFja2Jhci5qcyIsInRhYnMvdGFicy5qcyIsInRvYXN0L3RvYXN0LmpzIl0sIm5hbWVzIjpbIkRyb3Bkb3duIiwic2VsZWN0ZWQiLCJpZCIsInRoaXMiLCJkcm9wZG93biIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzaG93IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJjbGFzc05hbWUiLCJyZW1vdmUiLCJlbGVtZW50cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZWxlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsIm15RHJvcGRvd24iLCJnZXRBdHRyaWJ1dGUiLCJGb3JtIiwiVkFMSURBVEUiLCJpbnB1dHMiLCJkaXNhYmxlZCIsImlucHV0IiwicGFyZW50Tm9kZSIsIk1JTiIsIm1pbiIsInR5cGUiLCJNQVgiLCJtYXgiLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiRU1BSUwiLCJ2YWx1ZSIsInRlc3QiLCJNb2RhbCIsIm1vZGFsSWQiLCJfc2VsZiIsIm1vZGFsIiwiaXNPcGVuIiwiY2xvc2VCdXR0b25zIiwiYnRuX2Nsb3NlIiwiaGlkZSIsImUiLCJrZXlDb2RlIiwiYWRkIiwibWVtb3J5X21vZGFscyIsImVsZW0iLCJjdXJyZW50X21vZGFsIiwibW9kYWxCb2R5IiwicXVlcnlTZWxlY3RvciIsIlNpZGVOYXYiLCIkc2hvd0J1dHRvbkVsIiwiJGhpZGVCdXR0b25FbCIsIiRzaWRlTmF2RWwiLCIkc2lkZU5hdkNvbnRhaW5lckVsIiwidG91Y2hpbmdTaWRlTmF2Iiwic3RhcnRYIiwiY3VycmVudFgiLCJhZGRFdmVudExpc3RlbmVycyIsInNob3dTaWRlTmF2IiwiaGlkZVNpZGVOYXYiLCJibG9ja0NsaWNrcyIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsImV2dCIsInN0b3BQcm9wYWdhdGlvbiIsIm9uVHJhbnNpdGlvbkVuZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInN0eWxlIiwib3ZlcmZsb3ciLCJ1cGRhdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0cmFuc2xhdGVYIiwiTWF0aCIsInRyYW5zZm9ybSIsInRvdWNoZXMiLCJwYWdlWCIsInByZXZlbnREZWZhdWx0Iiwic2lkZW5hdiIsInNuYWNrYmFyIiwic25hY2tiYXJJZCIsIm1lbW9yeV9zbmFja2JhcnMiLCJjdXJyZW50X3NuYWNrYmFyIiwic25hY2tiYXJCb2R5IiwiVGFicyIsInRhYiIsInBhcmVudFRhYnMiLCJjaGlsZHJlbiIsInNlY3Rpb25zVGFicyIsImoiLCJ0YWJzIiwiQXJyYXkiLCJmcm9tIiwibXlUYWIiLCJ3aW5kb3ciLCJpbmRleCIsImNvbnNvbGUiLCJsb2ciLCJ0b2FzdCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsVUFBQSxTQUFBQyxFQUFBQyxHQUNBLFlBRUFDLE1BQUFDLFNBQUFILEVBQ0FFLEtBQUFELEdBQUFHLFNBQUFDLGVBQUFKLEdBR0FDLEtBQUFJLEtBQUEsV0FFQSxHQUFBSixLQUFBRCxHQUFBTSxVQUFBQyxTQUFBLHFCQVNBTixLQUFBRCxHQUFBUSxXQUFBLHdCQUNBUCxLQUFBRCxHQUFBTSxVQUFBRyxPQUFBLHlCQVZBLENBQ0EsR0FBQUMsR0FBQVAsU0FBQVEsdUJBQUEsb0JBRUFELEdBQUFFLE9BQUEsR0FDQUYsRUFBQSxHQUFBSixVQUFBRyxPQUFBLHFCQUVBUixLQUFBRCxHQUFBUSxXQUFBLHVCQVFBUCxLQUFBRCxHQUFBYSxpQkFBQSxnQkFBQSxXQUNBWixLQUFBSyxVQUFBQyxTQUFBLHlCQUNBTixLQUFBSyxVQUFBRyxPQUFBLDRCQU9BLFdBQ0EsWUFLQSxLQUFBLEdBRkFLLEdBQUFYLFNBQUFZLGlCQUFBLHFCQUVBQyxFQUFBLEVBQUFB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QUNBQSIsImZpbGUiOiJzdGV3ZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgICAgdmFyIERyb3Bkb3duID0gZnVuY3Rpb24oc2VsZWN0ZWQsIGlkKSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICB0aGlzLmRyb3Bkb3duID0gc2VsZWN0ZWQ7XG4gICAgICAgIHRoaXMuaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG5cblxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wZG93bi0tdmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZHJvcGRvd24tLXZpc2libGUnKTtcblxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzWzBdLmNsYXNzTGlzdC5yZW1vdmUoXCJkcm9wZG93bi0tdmlzaWJsZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pZC5jbGFzc05hbWUgKz0gXCIgZHJvcGRvd24tLXZpc2libGVcIjtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlkLmNsYXNzTmFtZSArPSBcIiBkcm9wZG93bi0tYW5pbWF0YWJsZVwiO1xuICAgICAgICAgICAgICAgIHRoaXMuaWQuY2xhc3NMaXN0LnJlbW92ZShcImRyb3Bkb3duLS12aXNpYmxlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pZC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wZG93bi0tYW5pbWF0YWJsZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wZG93bi0tYW5pbWF0YWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cblxuICAgICEgZnVuY3Rpb24oKXtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgIC8qIGdldCBkcm9wZG93biBpdGVtICovXG4gICAgICAgIHZhciBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tzdGV3ZWQtZHJvcGRvd25dJyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgbXlEcm9wZG93biA9IGVsZW1zW2ldO1xuXG4gICAgICAgICAgICAvKiBvbiBjbGljayBpbiB0YWIgKi9cbiAgICAgICAgICAgIG15RHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgICAgICAgICB2YXIgaWQgPSB0aGlzLmdldEF0dHJpYnV0ZSgnc3Rld2VkLWRyb3Bkb3duJylcbiAgICAgICAgICAgICAgICB2YXIgZHJvcGRvd24gPSBuZXcgRHJvcGRvd24odGhpcywgaWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCAhdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykgKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pOyAgICAgICAgXG5cbiAgICAgICAgfVxuXG4gICAgfSgpO1xuXG5cbiIsInZhciBGb3JtID0gZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGNvbnN0IFZBTElEQVRFID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3N0ZXdlZC12YWxpZGF0ZT1cInRydWVcIl0nKTtcbiAgICB2YXIgaW5wdXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGV4dGZpZWxkX19pbnB1dCcpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICBpZiAoISBpbnB1dHNbaV0uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGlucHV0c1tpXTtcbiAgICAgICAgICAgIGlucHV0LnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCc7XG5cbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICAgICAgICAgaWYgKFZBTElEQVRFLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBNSU4gPSAodGhpcy5taW4gPT0gJycpID8gKCh0aGlzLnR5cGUgPT0gJ3RlbCcpID8gOSA6IDIgKSA6IHRoaXMubWluLFxuICAgICAgICAgICAgICAgICAgICBNQVggPSAodGhpcy5tYXggPT0gJycpID8gKCh0aGlzLnR5cGUgPT0gJ3RlbCcpID8gMTMgOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiApIDogdGhpcy5tYXgsXG4gICAgICAgICAgICAgICAgICAgIEVNQUlMID0gL14oW1xcdy1dKyg/OlxcLltcXHctXSspKilAKCg/OltcXHctXStcXC4pKlxcd1tcXHctXXswLDY2fSlcXC4oW2Etel17Miw2fSg/OlxcLlthLXpdezJ9KT8pJC9pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gJ3NlbGVjdC1vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS12YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0taW52YWxpZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09ICd0ZXh0YXJlYScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3RleHRmaWVsZCB0ZXh0ZmllbGQtLXZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS1pbnZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKHRoaXMudmFsdWUubGVuZ3RoID49IE1JTiApICYmICh0aGlzLnZhbHVlLmxlbmd0aCA8PSBNQVgpICkgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09ICdlbWFpbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEVNQUlMLnRlc3QodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0tdmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS1pbnZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0tdmFsaWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICd0ZXh0ZmllbGQgdGV4dGZpZWxkLS1pbnZhbGlkJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkIHRleHRmaWVsZC0tZmlsbGVkJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUgPSAndGV4dGZpZWxkJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuIWZ1bmN0aW9uKCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIG5ldyBGb3JtKCk7XG59KCk7IiwidmFyIE1vZGFsID0gZnVuY3Rpb24obW9kYWxJZCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdmFyIG51bSA9IDE7XG5cbiAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJZCk7XG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICBcbiAgICAvKiBDb25zdHJ1Y3RvciAqL1xuICAgIGlmKHRoaXMubW9kYWwgIT09IG51bGwpIHtcblxuICAgICAgICB2YXIgY2xvc2VCdXR0b25zID0gdGhpcy5tb2RhbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtb2RhbC1jbG9zZScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsb3NlQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGJ0bl9jbG9zZSA9IGNsb3NlQnV0dG9uc1tpXTtcbiAgICAgICAgICAgIGJ0bl9jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3NlbGYuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbC0tYW5pbWF0YWJsZScpKXtcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1hbmltYXRhYmxlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvL2FkZCBrZXkgY2xvc2UgZXZlbnRcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAndXNlIHN0cmljdCdcblxuICAgICAgICAgICAgaWYoZS5rZXlDb2RlID09PSAyNyAmJiBfc2VsZi5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICBfc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qIFNob3cgQ3VycmVudCBNb2RhbCAqL1xuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYodGhpcy5tb2RhbCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyogSGlkZSBDdXJyZW50IE1vZGFsICovXG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy5tb2RhbCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1hbmltYXRhYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cblxuISBmdW5jdGlvbigpe1xuICAgJ3VzZSBzdHJpY3QnO1xuXG4gICB2YXIgbWVtb3J5X21vZGFscyA9IFtdO1xuICAgdmFyIGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3N0ZXdlZC1tb2RhbF0nKTtcblxuICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbGVtID0gZWxlbXNbaV07XG4gICAgdmFyIG1vZGFsSWQgPSBlbGVtLmdldEF0dHJpYnV0ZSgnc3Rld2VkLW1vZGFsJyk7XG4gICAgbWVtb3J5X21vZGFsc1ttb2RhbElkXSA9IG5ldyBNb2RhbChtb2RhbElkKTtcblxuICAgIC8qIEVlbGVtZW50IGNsaWNrICovXG4gICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgdmFyIGN1cnJlbnRfbW9kYWwgPSB0aGlzLmdldEF0dHJpYnV0ZSgnc3Rld2VkLW1vZGFsJyk7XG4gICAgICAgIHZhciBtb2RhbCA9IG1lbW9yeV9tb2RhbHNbY3VycmVudF9tb2RhbF07XG5cbiAgICAgICAgdmFyIG1vZGFsQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpO1xuXG4gICAgICAgIG1vZGFsQm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbW9kYWwuaGlkZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAobW9kYWwuaXNPcGVuKSB7XG4gICAgICAgICAgICBtb2RhbC5oaWRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb2RhbC5zaG93KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbn0oKTsiLCJ2YXIgU2lkZU5hdiA9IGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciAkc2hvd0J1dHRvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLW1lbnUtc2hvdycpLFxuICAgICRoaWRlQnV0dG9uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbWVudS1oaWRlJyksXG4gICAgJHNpZGVOYXZFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaWRlLW5hdicpLFxuICAgICRzaWRlTmF2Q29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2lkZS1uYXYtY29udGFpbmVyJyksXG4gICAgJGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtc2lkZS1uYXYtY29udGFpbmVyJyksXG4gICAgdG91Y2hpbmdTaWRlTmF2ID0gZmFsc2UsXG4gICAgc3RhcnRYID0gMCxcbiAgICBjdXJyZW50WCA9IDA7XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGlmICgkc2hvd0J1dHRvbkVsKSB7XG4gICAgICAgICAgICAkc2hvd0J1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5zaG93U2lkZU5hdik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJGhpZGVCdXR0b25FbCkge1xuICAgICAgICAgICAgJGhpZGVCdXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVTaWRlTmF2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2lkZU5hdkVsKSB7XG4gICAgICAgICAgICAkc2lkZU5hdkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZVNpZGVOYXYpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzaWRlTmF2Q29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgICRzaWRlTmF2Q29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmJsb2NrQ2xpY2tzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2lkZU5hdkVsKSB7XG4gICAgICAgICAgICAkc2lkZU5hdkVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydCk7XG4gICAgICAgICAgICAkc2lkZU5hdkVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUpO1xuICAgICAgICAgICAgJHNpZGVOYXZFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmJsb2NrQ2xpY2tzID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICB2YXIgb25UcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICRzaWRlTmF2RWwuY2xhc3NMaXN0LnJlbW92ZSgnc2lkZS1uYXYtLWFuaW1hdGFibGUnKTtcbiAgICAgICAgJHNpZGVOYXZFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgb25UcmFuc2l0aW9uRW5kKTtcbiAgICB9XG5cbiAgICB0aGlzLnNob3dTaWRlTmF2ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzaWRlTmF2RWwuY2xhc3NMaXN0LmFkZCgnc2lkZS1uYXYtLWFuaW1hdGFibGUnKTtcbiAgICAgICAgJHNpZGVOYXZFbC5jbGFzc0xpc3QuYWRkKCdzaWRlLW5hdi0tdmlzaWJsZScpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgJHNpZGVOYXZFbC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgb25UcmFuc2l0aW9uRW5kKTtcbiAgICB9XG5cbiAgICB2YXIgaGlkZVNpZGVOYXYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNpZGVOYXZFbC5jbGFzc0xpc3QuYWRkKCdzaWRlLW5hdi0tYW5pbWF0YWJsZScpO1xuICAgICAgICAkc2lkZU5hdkVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NpZGUtbmF2LS12aXNpYmxlJyk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF0uc3R5bGUub3ZlcmZsb3cgPSBcIlwiO1xuICAgICAgICAkc2lkZU5hdkVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBvblRyYW5zaXRpb25FbmQpO1xuICAgIH1cblxuICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICBpZiAoIXRvdWNoaW5nU2lkZU5hdikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlWCA9IE1hdGgubWluKDAsIGN1cnJlbnRYIC0gc3RhcnRYKTtcbiAgICAgICAgJHNpZGVOYXZDb250YWluZXJFbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoXCIgKyB0cmFuc2xhdGVYICsgXCJweClcIjtcblxuICAgIH1cblxuICAgIHRoaXMub25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZXZ0KSB7XG5cbiAgICAgICAgaWYgKCEkc2lkZU5hdkVsLmNsYXNzTGlzdC5jb250YWlucygnc2lkZS1uYXYtLXZpc2libGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnRYID0gZXZ0LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIGN1cnJlbnRYID0gc3RhcnRYO1xuICAgICAgICB0b3VjaGluZ1NpZGVOYXYgPSB0cnVlO1xuXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLm9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZXZ0KSB7XG5cbiAgICAgICAgaWYgKCF0b3VjaGluZ1NpZGVOYXYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnRYID0gZXZ0LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZVggPSBNYXRoLm1pbigwLCBjdXJyZW50WCAtIHN0YXJ0WCk7XG5cbiAgICAgICAgaWYgKHRyYW5zbGF0ZVggPCAwKSB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMub25Ub3VjaEVuZCA9IGZ1bmN0aW9uKGV2dCkge1xuXG4gICAgICAgIGlmICghdG91Y2hpbmdTaWRlTmF2KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0b3VjaGluZ1NpZGVOYXYgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCB0cmFuc2xhdGVYID0gTWF0aC5taW4oMCwgY3VycmVudFggLSBzdGFydFgpO1xuICAgICAgICAkc2lkZU5hdkNvbnRhaW5lckVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuXG4gICAgICAgIGlmICh0cmFuc2xhdGVYIDwgMCkge1xuICAgICAgICAgICAgaGlkZVNpZGVOYXYoKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblxuISBmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc2lkZW5hdiA9IG5ldyBTaWRlTmF2KCk7XG4gICAgc2lkZW5hdi5hZGRFdmVudExpc3RlbmVycygpO1xuXG59KCk7XG4iLCJ2YXIgc25hY2tiYXIgPSBmdW5jdGlvbihzbmFja2JhcklkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgbnVtID0gMTtcbiAgICBcbiAgICB0aGlzLnNuYWNrYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc25hY2tiYXJJZCk7XG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcblxuICAgIC8qIENvbnN0cnVjdG9yICovXG4gICAgaWYgKHRoaXMuc25hY2tiYXIgIT09IG51bGwpIHtcblxuICAgICAgICB2YXIgY2xvc2VCdXR0b25zID0gdGhpcy5zbmFja2Jhci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzbmFja2Jhci1jbG9zZScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsb3NlQnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGJ0bl9jbG9zZSA9IGNsb3NlQnV0dG9uc1tpXTtcbiAgICAgICAgICAgIGJ0bl9jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3NlbGYuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc25hY2tiYXIuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnc25hY2tiYXItLWFuaW1hdGFibGUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnc25hY2tiYXItLWFuaW1hdGFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogQWRkIGtleSBjbG9zZSBldmVudCAqL1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PT0gMjcgJiYgX3NlbGYuaXNPcGVuKXtcbiAgICAgICAgICAgICAgICBfc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qIFNob3cgQ3VycmVudCBzbmFja2JhciAqL1xuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYodGhpcy5zbmFja2JhciAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLmNsYXNzTGlzdC5hZGQoJ3NuYWNrYmFyLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyogSGlkZSBDdXJyZW50IHNuYWNrYmFyICovXG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy5zbmFja2JhciAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3NuYWNrYmFyLS12aXNpYmxlJyk7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLmNsYXNzTGlzdC5hZGQoJ3NuYWNrYmFyLS1hbmltYXRhYmxlJyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxufTtcblxuLy9TSE9XIHNuYWNrYmFyXG4hIGZ1bmN0aW9uKCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG1lbW9yeV9zbmFja2JhcnMgPSBbXTtcbiAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3Rld2VkLXNuYWNrYmFyXScpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZWxlbSA9IGVsZW1zW2ldO1xuICAgICAgICB2YXIgc25hY2tiYXJJZCA9IGVsZW0uZ2V0QXR0cmlidXRlKCdzdGV3ZWQtc25hY2tiYXInKTtcbiAgICAgICAgbWVtb3J5X3NuYWNrYmFyc1tzbmFja2JhcklkXSA9IG5ldyBzbmFja2JhcihzbmFja2JhcklkKTtcblxuICAgICAgICAvKiBFbGVtZW50IGNsaWNrICovXG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudF9zbmFja2JhciA9IHRoaXMuZ2V0QXR0cmlidXRlKCdzdGV3ZWQtc25hY2tiYXInKTtcbiAgICAgICAgICAgIHZhciBzbmFja2JhciA9IG1lbW9yeV9zbmFja2JhcnNbY3VycmVudF9zbmFja2Jhcl07XG5cbiAgICAgICAgICAgIHZhciBzbmFja2JhckJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc25hY2tiYXInKTtcblxuICAgICAgICAgICAgc25hY2tiYXJCb2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc25hY2tiYXIuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzbmFja2Jhci5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICBzbmFja2Jhci5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNuYWNrYmFyLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSgpOyIsIiAgICB2YXIgVGFicyA9IGZ1bmN0aW9uKHNlbGVjdGVkLCBpZCkge1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgY29uc3QgS0VZX0xFRlQgPSAzNyxcbiAgICAgICAgICAgIEtFWV9VUCA9IDM4LFxuICAgICAgICAgICAgS0VZX1JJR0hUID0gMzksXG4gICAgICAgICAgICBLRVlfRE9XTiA9IDQwO1xuXG4gICAgICAgIHRoaXMudGFiID0gc2VsZWN0ZWQ7XG4gICAgICAgIHRoaXMuaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG5cbiAgICAgICAgdGhpcy5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBwYXJlbnRUYWJzID0gdGhpcy50YWIucGFyZW50Tm9kZS5jaGlsZHJlbjtcbiAgICAgICAgICAgIHZhciBzZWN0aW9uc1RhYnMgPSB0aGlzLmlkLnBhcmVudE5vZGUuY2hpbGRyZW47XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyZW50VGFicy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhcmVudFRhYnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgndGFic19faXRlbS0tYWN0aXZlJyk7XG4gICAgICAgICAgICB9ICAgIFxuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlY3Rpb25zVGFicy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zVGFic1tqXS5jbGFzc0xpc3QucmVtb3ZlKCd0YWItc2VjdGlvbi0tYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy50YWIuY2xhc3NMaXN0LmFkZCgndGFic19faXRlbS0tYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLmlkLmNsYXNzTGlzdC5hZGQoJ3RhYi1zZWN0aW9uLS1hY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuXG4gICAgISBmdW5jdGlvbigpe1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgICAgLyogZ2V0IHRhYnMgaXRlbSAqL1xuICAgICAgICB2YXIgdGFicyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RhYnNfX2l0ZW0nKTtcblxuICAgICAgICAvKiBzYXZlIGluIGFycmF5IGFsbCB0YWJzICovXG4gICAgICAgIGNvbnN0IHRhYnNBcnJheSA9IEFycmF5LmZyb20odGFicyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbXlUYWIgPSB0YWJzW2ldO1xuXG4gICAgICAgICAgICAvKiBvbiBjbGljayBpbiB0YWIgKi9cbiAgICAgICAgICAgIG15VGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3N0ZXdlZC10YWItaWQnKVxuICAgICAgICAgICAgICAgIHZhciB0YWIgPSBuZXcgVGFicyh0aGlzLCBpZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIGlkICE9PSBcImZhbHNlXCIgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWIuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTsgICAgICAgIFxuXG4gICAgICAgIH1cblxuICAgICAgICAvKiBUT0RPOiBDaGFuZ2UgdGFiIHVzaW5nIGtleWJvYXJkICovXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICAgICAgLy8gc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgICAgIC8vICAgICBjYXNlIEtFWV9VUDpcbiAgICAgICAgICAgIC8vICAgICBjYXNlIEtFWV9MRUZUOlxuICAgICAgICAgICAgLy8gICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAvLyAgICAgY2FzZSBLRVlfUklHSFQ6XG4gICAgICAgICAgICAvLyAgICAgY2FzZSBLRVlfRE9XTjpcbiAgICAgICAgICAgIC8vICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcblxuICAgICAgICAgICAgLy8gICAgIGRlZmF1bHQ6IGJyZWFrO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA+PSB0YWJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdGFicy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH0oKTtcblxuXG4iLCJ2YXIgdG9hc3QgPSBmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cblxufTtcblxuXG4hZnVuY3Rpb24oKXtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdG9hc3QoKTtcbn0oKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
